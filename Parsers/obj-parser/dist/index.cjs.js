"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@gl-widget/gl-widget");function t(e,t){return e>0?e-1:e+t}var r=function(e){"string"!=typeof buf&&(e=e.toString());for(var r=e.trim().split("\n"),s=[],l=[],a=[],n=[],i=[],u=[],o=null,p=0;p<r.length;p++){var c=r[p];if("#"!==c[0]){var h=c.trim().replace(/ +/g," ").split(" ");switch(h[0]){case"o":o=h.slice(1).join(" ");break;case"v":var f=h.slice(1).map(Number).slice(0,3);s.push(f);break;case"vt":var g=h.slice(1).map(Number);a.push(g);break;case"vn":var v=h.slice(1).map(Number);n.push(v);break;case"f":var m=[],b=[],N=[];h.slice(1).forEach((function(e){var r=e.split("/").map((function(e){return""===e?NaN:Number(e)}));m.push(t(r[0],s.length)),r.length>1&&(isNaN(r[1])||b.push(t(r[1],a.length)),isNaN(r[2])||N.push(t(r[2],n.length)))})),l.push(m),b.length>0&&i.push(b),N.length>0&&u.push(N)}}}var d={positions:s,cells:l};return a.length>0&&(d.vertexUVs=a),i.length>0&&(d.faceUVs=i),n.length>0&&(d.vertexNormals=n),u.length>0&&(d.faceNormals=u),null!==o&&(d.name=o),d};exports.parse=function(t){let s=r(t),l=new e.BufferGeometry,a=[],n=[],i=[];for(let e=0;e<s.cells.length;e++){let t=s.cells[e],r=s.faceNormals[e];for(let e=0;e<3;e++)for(let l=0;l<3;l++)n.push(s.positions[t[e]][l]),a.push(s.vertexNormals[r[e]][l]);i.push(3*e,3*e+1,3*e+2)}return l.addAttribute("position",new e.Float32Attribute(n,3)),l.addAttribute("index",new e.Uint32Attribute(i,1)),l.addAttribute("normal",new e.Float32Attribute(a,3)),l};
//# sourceMappingURL=index.cjs.js.map
