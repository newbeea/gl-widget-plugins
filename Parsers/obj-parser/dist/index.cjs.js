"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t=0,s=0,i=0){this.x=t,this.y=s,this.z=i}set(t,s,i){return this.x=t,this.y=s,this.z=i,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subVectors(t,s){return this.x=t.x-s.x,this.y=t.y-s.y,this.z=t.z-s.z,this}fromArray(t,s){return void 0===s&&(s=0),this.x=t[s],this.y=t[s+1],this.z=t[s+2],this}setFromMatrixColumn(t,s){return this.fromArray(t.elements,4*s)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}clone(){return new t(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}crossVectors(t,s){var i=t.x,h=t.y,e=t.z,r=s.x,n=s.y,a=s.z;return this.x=h*a-e*n,this.y=e*r-i*a,this.z=i*n-h*r,this}divideScalar(t){return this.multiplyScalar(1/t)}normalize(){return this.divideScalar(this.length())}applyQuaternion(t){var s=this.x,i=this.y,h=this.z,e=t.x,r=t.y,n=t.z,a=t.w,o=a*s+r*h-n*i,u=a*i+n*s-e*h,_=a*h+e*i-r*s,l=-e*s-r*i-n*h;return this.x=o*a+l*-e+u*-n-_*-r,this.y=u*a+l*-r+_*-e-o*-n,this.z=_*a+l*-n+o*-r-u*-e,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,s,i){var h=Math.sin(s)*t;return this.x=h*Math.sin(i),this.y=Math.cos(s)*t,this.z=h*Math.cos(i),this}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){var s=this.x-t.x,i=this.y-t.y,h=this.z-t.z;return s*s+i*i+h*h}}function s(t=0,s=0,i=0,h=1){this._x=t,this._y=s,this._z=i,this._w=void 0!==h?h:1}var i,h,e,r;Object.assign(s,{slerp:function(t,s,i,h){return i.copy(t).slerp(s,h)},slerpFlat:function(t,s,i,h,e,r,n){var a=i[h+0],o=i[h+1],u=i[h+2],_=i[h+3],l=e[r+0],c=e[r+1],y=e[r+2],x=e[r+3];if(_!==x||a!==l||o!==c||u!==y){var z=1-n,d=a*l+o*c+u*y+_*x,p=d>=0?1:-1,f=1-d*d;if(f>Number.EPSILON){var w=Math.sqrt(f),m=Math.atan2(w,d*p);z=Math.sin(z*m)/w,n=Math.sin(n*m)/w}var g=n*p;if(a=a*z+l*g,o=o*z+c*g,u=u*z+y*g,_=_*z+x*g,z===1-n){var v=1/Math.sqrt(a*a+o*o+u*u+_*_);a*=v,o*=v,u*=v,_*=v}}t[s]=a,t[s+1]=o,t[s+2]=u,t[s+3]=_}}),Object.defineProperties(s.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(s.prototype,{set:function(t,s,i,h){return this._x=t,this._y=s,this._z=i,this._w=h,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,s){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,h=t._y,e=t._z,r=t.order,n=Math.cos,a=Math.sin,o=n(i/2),u=n(h/2),_=n(e/2),l=a(i/2),c=a(h/2),y=a(e/2);return"XYZ"===r?(this._x=l*u*_+o*c*y,this._y=o*c*_-l*u*y,this._z=o*u*y+l*c*_,this._w=o*u*_-l*c*y):"YXZ"===r?(this._x=l*u*_+o*c*y,this._y=o*c*_-l*u*y,this._z=o*u*y-l*c*_,this._w=o*u*_+l*c*y):"ZXY"===r?(this._x=l*u*_-o*c*y,this._y=o*c*_+l*u*y,this._z=o*u*y+l*c*_,this._w=o*u*_-l*c*y):"ZYX"===r?(this._x=l*u*_-o*c*y,this._y=o*c*_+l*u*y,this._z=o*u*y-l*c*_,this._w=o*u*_+l*c*y):"YZX"===r?(this._x=l*u*_+o*c*y,this._y=o*c*_+l*u*y,this._z=o*u*y-l*c*_,this._w=o*u*_-l*c*y):"XZY"===r&&(this._x=l*u*_-o*c*y,this._y=o*c*_-l*u*y,this._z=o*u*y+l*c*_,this._w=o*u*_+l*c*y),!1!==s&&this.onChangeCallback(),this},setFromAxisAngle:function(t,s){var i=s/2,h=Math.sin(i);return this._x=t.x*h,this._y=t.y*h,this._z=t.z*h,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var s,i=t.elements,h=i[0],e=i[4],r=i[8],n=i[1],a=i[5],o=i[9],u=i[2],_=i[6],l=i[10],c=h+a+l;return c>0?(s=.5/Math.sqrt(c+1),this._w=.25/s,this._x=(_-o)*s,this._y=(r-u)*s,this._z=(n-e)*s):h>a&&h>l?(s=2*Math.sqrt(1+h-a-l),this._w=(_-o)/s,this._x=.25*s,this._y=(e+n)/s,this._z=(r+u)/s):a>l?(s=2*Math.sqrt(1+a-h-l),this._w=(r-u)/s,this._x=(e+n)/s,this._y=.25*s,this._z=(o+_)/s):(s=2*Math.sqrt(1+l-h-a),this._w=(n-e)/s,this._x=(r+u)/s,this._y=(o+_)/s,this._z=.25*s),this.onChangeCallback(),this},setFromUnitVectors:(h=new t,function(s,e){return void 0===h&&(h=new t),(i=s.dot(e)+1)<1e-6?(i=0,Math.abs(s.x)>Math.abs(s.z)?h.set(-s.y,s.x,0):h.set(0,-s.z,s.y)):h.crossVectors(s,e),this._x=h.x,this._y=h.y,this._z=h.z,this._w=i,this.normalize()}),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,s){return void 0!==s?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,s)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,s){var i=t._x,h=t._y,e=t._z,r=t._w,n=s._x,a=s._y,o=s._z,u=s._w;return this._x=i*u+r*n+h*o-e*a,this._y=h*u+r*a+e*n-i*o,this._z=e*u+r*o+i*a-h*n,this._w=r*u-i*n-h*a-e*o,this.onChangeCallback(),this},slerp:function(t,s){if(0===s)return this;if(1===s)return this.copy(t);var i=this._x,h=this._y,e=this._z,r=this._w,n=r*t._w+i*t._x+h*t._y+e*t._z;if(n<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,n=-n):this.copy(t),n>=1)return this._w=r,this._x=i,this._y=h,this._z=e,this;var a=Math.sqrt(1-n*n);if(Math.abs(a)<.001)return this._w=.5*(r+this._w),this._x=.5*(i+this._x),this._y=.5*(h+this._y),this._z=.5*(e+this._z),this;var o=Math.atan2(a,n),u=Math.sin((1-s)*o)/a,_=Math.sin(s*o)/a;return this._w=r*u+this._w*_,this._x=i*u+this._x*_,this._y=h*u+this._y*_,this._z=e*u+this._z*_,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,s){return void 0===s&&(s=0),this._x=t[s],this._y=t[s+1],this._z=t[s+2],this._w=t[s+3],this.onChangeCallback(),this},toArray:function(t,s){return void 0===t&&(t=[]),void 0===s&&(s=0),t[s]=this._x,t[s+1]=this._y,t[s+2]=this._z,t[s+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),(r=e||(e={}))[r.FRONT=0]="FRONT",r[r.BACK=1]="BACK",r[r.DOUBLE=2]="DOUBLE";class n{constructor(t,s=1,i=1){if(this.state=new Proxy({needsUpdate:!1,version:0},{set:(t,s,i,h)=>{let e=Reflect.set(t,s,i,h);return"needsUpdate"===s&&!0===i&&this.version++,e}}),this.version=0,this.imageLoadedCount=0,this.image=null,this.images=[],t instanceof Array)this.imageCount=t.length,t.forEach(t=>{let s=new Image;s.onload=()=>{this.loadedCallback(),s.onload=null},s.src=t,this.images.push(s)});else if(t){let s=new Image;s.onload=()=>{this.loadedCallback(),s.onload=null},s.src=t,this.image=s,this.imageCount=1}this.format=s,this.type=i,this.needsUpdate=!1,this.glTexture=null}loadedCallback(){this.imageLoadedCount+=1,this.imageLoadedCount==this.imageCount&&(this.state.needsUpdate=!0)}clone(){return new n(void 0).copy(this)}copy(t){return this.image=t.image,this.format=t.format,this.type=t.type,this}}new n;var a;class o{constructor(s,i){this.min=void 0!==s?s:new t(1/0,1/0,1/0),this.max=void 0!==i?i:new t(-1/0,-1/0,-1/0)}}class u{constructor(){this.attributes=new Map,this.index=null,this.boundingBox=new o}addAttribute(t,s){"index"===t?this.index=s:this.attributes.set(t,s)}}class _{constructor(t,s=!1){this.itemSize=t,this.normalized=s}setXY(t,s,i){return t*=this.itemSize,this.array[t+0]=s,this.array[t+1]=i,this}setXYZ(t,s,i,h){return t*=this.itemSize,this.array[t+0]=s,this.array[t+1]=i,this.array[t+2]=h,this}}class l extends _{constructor(t,s,i=!1){super(s,i),t instanceof Float32Array?this.array=t:this.array=new Float32Array(t)}}class c extends _{constructor(t,s,i=!1){super(s,i),t instanceof Uint32Array?this.array=t:this.array=new Uint32Array(t)}}function y(t,s){return t>0?t-1:t+s}!function(t){t[t.PERSPECTIVE=0]="PERSPECTIVE",t[t.ORTHOGRAPHIC=1]="ORTHOGRAPHIC"}(a||(a={}));var x=function(t){"string"!=typeof buf&&(t=t.toString());for(var s=t.trim().split("\n"),i=[],h=[],e=[],r=[],n=[],a=[],o=null,u=0;u<s.length;u++){var _=s[u];if("#"!==_[0]){var l=_.trim().replace(/ +/g," ").split(" ");switch(l[0]){case"o":o=l.slice(1).join(" ");break;case"v":var c=l.slice(1).map(Number).slice(0,3);i.push(c);break;case"vt":var x=l.slice(1).map(Number);e.push(x);break;case"vn":var z=l.slice(1).map(Number);r.push(z);break;case"f":var d=[],p=[],f=[];l.slice(1).forEach((function(t){var s=t.split("/").map((function(t){return""===t?NaN:Number(t)}));d.push(y(s[0],i.length)),s.length>1&&(isNaN(s[1])||p.push(y(s[1],e.length)),isNaN(s[2])||f.push(y(s[2],r.length)))})),h.push(d),p.length>0&&n.push(p),f.length>0&&a.push(f)}}}var w={positions:i,cells:h};return e.length>0&&(w.vertexUVs=e),n.length>0&&(w.faceUVs=n),r.length>0&&(w.vertexNormals=r),a.length>0&&(w.faceNormals=a),null!==o&&(w.name=o),w};exports.parse=function(t){let s=x(t),i=new u,h=[],e=[],r=[];for(let t=0;t<s.cells.length;t++){let i=s.cells[t],n=s.faceNormals[t];for(let t=0;t<3;t++)for(let r=0;r<3;r++)e.push(s.positions[i[t]][r]),h.push(s.vertexNormals[n[t]][r]);r.push(3*t,3*t+1,3*t+2)}return i.addAttribute("position",new l(e,3)),i.addAttribute("index",new c(r,1)),i.addAttribute("normal",new l(h,3)),i};
//# sourceMappingURL=index.cjs.js.map
