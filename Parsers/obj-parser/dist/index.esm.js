import{BufferGeometry as e,Float32Attribute as t,Uint32Attribute as r}from"@gl-widget/gl-widget";function s(e,t){return e>0?e-1:e+t}var l=function(e){"string"!=typeof buf&&(e=e.toString());for(var t=e.trim().split("\n"),r=[],l=[],n=[],a=[],i=[],u=[],o=null,p=0;p<t.length;p++){var h=t[p];if("#"!==h[0]){var c=h.trim().replace(/ +/g," ").split(" ");switch(c[0]){case"o":o=c.slice(1).join(" ");break;case"v":var g=c.slice(1).map(Number).slice(0,3);r.push(g);break;case"vt":var f=c.slice(1).map(Number);n.push(f);break;case"vn":var m=c.slice(1).map(Number);a.push(m);break;case"f":var v=[],N=[],b=[];c.slice(1).forEach((function(e){var t=e.split("/").map((function(e){return""===e?NaN:Number(e)}));v.push(s(t[0],r.length)),t.length>1&&(isNaN(t[1])||N.push(s(t[1],n.length)),isNaN(t[2])||b.push(s(t[2],a.length)))})),l.push(v),N.length>0&&i.push(N),b.length>0&&u.push(b)}}}var d={positions:r,cells:l};return n.length>0&&(d.vertexUVs=n),i.length>0&&(d.faceUVs=i),a.length>0&&(d.vertexNormals=a),u.length>0&&(d.faceNormals=u),null!==o&&(d.name=o),d};function n(s){let n=l(s),a=new e,i=[],u=[],o=[];for(let e=0;e<n.cells.length;e++){let t=n.cells[e],r=n.faceNormals[e];for(let e=0;e<3;e++)for(let s=0;s<3;s++)u.push(n.positions[t[e]][s]),i.push(n.vertexNormals[r[e]][s]);o.push(3*e,3*e+1,3*e+2)}return a.addAttribute("position",new t(u,3)),a.addAttribute("index",new r(o,1)),a.addAttribute("normal",new t(i,3)),a}export{n as parse};
//# sourceMappingURL=index.esm.js.map
