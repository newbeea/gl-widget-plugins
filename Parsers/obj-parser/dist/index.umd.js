!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@gl-widget/gl-widget")):"function"==typeof define&&define.amd?define(["exports","@gl-widget/gl-widget"],t):t((e=e||self).parse={},e.GLWidget)}(this,(function(e,t){"use strict";function r(e,t){return e>0?e-1:e+t}var n=function(e){"string"!=typeof buf&&(e=e.toString());for(var t=e.trim().split("\n"),n=[],s=[],i=[],l=[],a=[],u=[],o=null,p=0;p<t.length;p++){var c=t[p];if("#"!==c[0]){var f=c.trim().replace(/ +/g," ").split(" ");switch(f[0]){case"o":o=f.slice(1).join(" ");break;case"v":var h=f.slice(1).map(Number).slice(0,3);n.push(h);break;case"vt":var g=f.slice(1).map(Number);i.push(g);break;case"vn":var d=f.slice(1).map(Number);l.push(d);break;case"f":var m=[],b=[],v=[];f.slice(1).forEach((function(e){var t=e.split("/").map((function(e){return""===e?NaN:Number(e)}));m.push(r(t[0],n.length)),t.length>1&&(isNaN(t[1])||b.push(r(t[1],i.length)),isNaN(t[2])||v.push(r(t[2],l.length)))})),s.push(m),b.length>0&&a.push(b),v.length>0&&u.push(v)}}}var N={positions:n,cells:s};return i.length>0&&(N.vertexUVs=i),a.length>0&&(N.faceUVs=a),l.length>0&&(N.vertexNormals=l),u.length>0&&(N.faceNormals=u),null!==o&&(N.name=o),N};e.parse=function(e){let r=n(e),s=new t.BufferGeometry,i=[],l=[],a=[];for(let e=0;e<r.cells.length;e++){let t=r.cells[e],n=r.faceNormals[e];for(let e=0;e<3;e++)for(let s=0;s<3;s++)l.push(r.positions[t[e]][s]),i.push(r.vertexNormals[n[e]][s]);a.push(3*e,3*e+1,3*e+2)}return s.addAttribute("position",new t.Float32Attribute(l,3)),s.addAttribute("index",new t.Uint32Attribute(a,1)),s.addAttribute("normal",new t.Float32Attribute(i,3)),s},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.js.map
