"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(){this.buffers=new WeakMap}initBuffer(t,r,e){let i=0;for(let[n,o]of e.attributes.entries()){let e=o.array,s=t.createBuffer();if(!s)return console.log("Failed to create the buffer object"),-1;t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);let a=t.getAttribLocation(r,n);a<0||(t.vertexAttribPointer(a,o.itemSize,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a)),e.length&&(i=e.length/o.itemSize),this.buffers.set(o,s)}if(e.index){let r=t.createBuffer();return r?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.index.array,t.STATIC_DRAW),this.buffers.set(e.index,r),{hasIndex:!0,count:e.index.array.length}):(console.log("Failed to create the buffer object"),-1)}return{hasIndex:!1,count:i}}bindBuffer(t,r,e){t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffers.get(e.index));for(let[i,n]of e.attributes.entries()){t.bindBuffer(t.ARRAY_BUFFER,this.buffers.get(n));let e=t.getAttribLocation(r,i);e<0||t.vertexAttribPointer(e,n.itemSize,t.FLOAT,!1,0,0)}}}class r{constructor(t=0,r=0,e=0){this.x=t,this.y=r,this.z=e}set(t,r,e){return this.x=t,this.y=r,this.z=e,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}fromArray(t,r){return void 0===r&&(r=0),this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,4*r)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}clone(){return new r(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}crossVectors(t,r){var e=t.x,i=t.y,n=t.z,o=r.x,s=r.y,a=r.z;return this.x=i*a-n*s,this.y=n*o-e*a,this.z=e*s-i*o,this}divideScalar(t){return this.multiplyScalar(1/t)}normalize(){return this.divideScalar(this.length())}applyQuaternion(t){var r=this.x,e=this.y,i=this.z,n=t.x,o=t.y,s=t.z,a=t.w,h=a*r+o*i-s*e,u=a*e+s*r-n*i,f=a*i+n*e-o*r,l=-n*r-o*e-s*i;return this.x=h*a+l*-n+u*-s-f*-o,this.y=u*a+l*-o+f*-n-h*-s,this.z=f*a+l*-s+h*-o-u*-n,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,e){var i=Math.sin(r)*t;return this.x=i*Math.sin(e),this.y=Math.cos(r)*t,this.z=i*Math.cos(e),this}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){var r=this.x-t.x,e=this.y-t.y,i=this.z-t.z;return r*r+e*e+i*i}}class e{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,r,e,i,n,o,s,a,h,u,f,l,c,p,m,v){var d=this.elements;return d[0]=t,d[4]=r,d[8]=e,d[12]=i,d[1]=n,d[5]=o,d[9]=s,d[13]=a,d[2]=h,d[6]=u,d[10]=f,d[14]=l,d[3]=c,d[7]=p,d[11]=m,d[15]=v,this}copy(t){var r=this.elements,e=t.elements;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],this}multiplyMatrices(t,r){var e=t.elements,i=r.elements,n=this.elements,o=e[0],s=e[4],a=e[8],h=e[12],u=e[1],f=e[5],l=e[9],c=e[13],p=e[2],m=e[6],v=e[10],d=e[14],g=e[3],y=e[7],w=e[11],M=e[15],b=i[0],_=i[4],x=i[8],E=i[12],A=i[1],T=i[5],R=i[9],U=i[13],I=i[2],P=i[6],B=i[10],S=i[14],C=i[3],z=i[7],k=i[11],O=i[15];return n[0]=o*b+s*A+a*I+h*C,n[4]=o*_+s*T+a*P+h*z,n[8]=o*x+s*R+a*B+h*k,n[12]=o*E+s*U+a*S+h*O,n[1]=u*b+f*A+l*I+c*C,n[5]=u*_+f*T+l*P+c*z,n[9]=u*x+f*R+l*B+c*k,n[13]=u*E+f*U+l*S+c*O,n[2]=p*b+m*A+v*I+d*C,n[6]=p*_+m*T+v*P+d*z,n[10]=p*x+m*R+v*B+d*k,n[14]=p*E+m*U+v*S+d*O,n[3]=g*b+y*A+w*I+M*C,n[7]=g*_+y*T+w*P+M*z,n[11]=g*x+y*R+w*B+M*k,n[15]=g*E+y*U+w*S+M*O,this}multiply(t){return this.multiplyMatrices(this,t)}makeTranslation(t,r,e){return this.set(1,0,0,t,0,1,0,r,0,0,1,e,0,0,0,1),this}makeScale(t,r,e){return this.set(t,0,0,0,0,r,0,0,0,0,e,0,0,0,0,1),this}makePerspective(t,r,e,i,n,o){var s=this.elements,a=2*n/(r-t),h=2*n/(e-i),u=(r+t)/(r-t),f=(e+i)/(e-i),l=-(o+n)/(o-n),c=-2*o*n/(o-n);return s[0]=a,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=h,s[9]=f,s[13]=0,s[2]=0,s[6]=0,s[10]=l,s[14]=c,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,r,e,i,n,o){var s=this.elements,a=1/(r-t),h=1/(e-i),u=1/(o-n),f=(r+t)*a,l=(e+i)*h,c=(o+n)*u;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-f,s[1]=0,s[5]=2*h,s[9]=0,s[13]=-l,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-c,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}getInverse(t){var r=this.elements,e=t.elements,i=e[0],n=e[1],o=e[2],s=e[3],a=e[4],h=e[5],u=e[6],f=e[7],l=e[8],c=e[9],p=e[10],m=e[11],v=e[12],d=e[13],g=e[14],y=e[15],w=c*g*f-d*p*f+d*u*m-h*g*m-c*u*y+h*p*y,M=v*p*f-l*g*f-v*u*m+a*g*m+l*u*y-a*p*y,b=l*d*f-v*c*f+v*h*m-a*d*m-l*h*y+a*c*y,_=v*c*u-l*d*u-v*h*p+a*d*p+l*h*g-a*c*g,x=i*w+n*M+o*b+s*_;if(0===x)return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity();var E=1/x;return r[0]=w*E,r[1]=(d*p*s-c*g*s-d*o*m+n*g*m+c*o*y-n*p*y)*E,r[2]=(h*g*s-d*u*s+d*o*f-n*g*f-h*o*y+n*u*y)*E,r[3]=(c*u*s-h*p*s-c*o*f+n*p*f+h*o*m-n*u*m)*E,r[4]=M*E,r[5]=(l*g*s-v*p*s+v*o*m-i*g*m-l*o*y+i*p*y)*E,r[6]=(v*u*s-a*g*s-v*o*f+i*g*f+a*o*y-i*u*y)*E,r[7]=(a*p*s-l*u*s+l*o*f-i*p*f-a*o*m+i*u*m)*E,r[8]=b*E,r[9]=(v*c*s-l*d*s-v*n*m+i*d*m+l*n*y-i*c*y)*E,r[10]=(a*d*s-v*h*s+v*n*f-i*d*f-a*n*y+i*h*y)*E,r[11]=(l*h*s-a*c*s-l*n*f+i*c*f+a*n*m-i*h*m)*E,r[12]=_*E,r[13]=(l*d*o-v*c*o+v*n*p-i*d*p-l*n*g+i*c*g)*E,r[14]=(v*h*o-a*d*o-v*n*u+i*d*u+a*n*g-i*h*g)*E,r[15]=(a*c*o-l*h*o+l*n*u-i*c*u-a*n*p+i*h*p)*E,this}compose(t,r,e){var i=this.elements,n=r._x,o=r._y,s=r._z,a=r._w,h=n+n,u=o+o,f=s+s,l=n*h,c=n*u,p=n*f,m=o*u,v=o*f,d=s*f,g=a*h,y=a*u,w=a*f,M=e.x,b=e.y,_=e.z;return i[0]=(1-(m+d))*M,i[1]=(c+w)*M,i[2]=(p-y)*M,i[3]=0,i[4]=(c-w)*b,i[5]=(1-(l+d))*b,i[6]=(v+g)*b,i[7]=0,i[8]=(p+y)*_,i[9]=(v-g)*_,i[10]=(1-(l+m))*_,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,i,n){var o=new r,s=new e,a=this.elements,h=o.set(a[0],a[1],a[2]).length(),u=o.set(a[4],a[5],a[6]).length(),f=o.set(a[8],a[9],a[10]).length();this.determinant()<0&&(h=-h),t.x=a[12],t.y=a[13],t.z=a[14],s.copy(this);var l=1/h,c=1/u,p=1/f;return s.elements[0]*=l,s.elements[1]*=l,s.elements[2]*=l,s.elements[4]*=c,s.elements[5]*=c,s.elements[6]*=c,s.elements[8]*=p,s.elements[9]*=p,s.elements[10]*=p,i.setFromRotationMatrix(s),n.x=h,n.y=u,n.z=f,this}determinant(){var t=this.elements,r=t[0],e=t[4],i=t[8],n=t[12],o=t[1],s=t[5],a=t[9],h=t[13],u=t[2],f=t[6],l=t[10],c=t[14];return t[3]*(+n*a*f-i*h*f-n*s*l+e*h*l+i*s*c-e*a*c)+t[7]*(+r*a*c-r*h*l+n*o*l-i*o*c+i*h*u-n*a*u)+t[11]*(+r*h*f-r*s*c-n*o*f+e*o*c+n*s*u-e*h*u)+t[15]*(-i*s*u-r*a*f+r*s*l+i*o*f-e*o*l+e*a*u)}clone(){return(new e).fromArray(this.elements)}fromArray(t,r=0){for(var e=0;e<16;e++)this.elements[e]=t[e+r];return this}extractRotation(t){var e=new r,i=this.elements,n=t.elements,o=1/e.setFromMatrixColumn(t,0).length(),s=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return i[0]=n[0]*o,i[1]=n[1]*o,i[2]=n[2]*o,i[4]=n[4]*s,i[5]=n[5]*s,i[6]=n[6]*s,i[8]=n[8]*a,i[9]=n[9]*a,i[10]=n[10]*a,this}lookAt(t,e,i){var n=new r,o=new r,s=new r,a=this.elements;return s.subVectors(t,e),0===s.lengthSq()&&(s.z=1),s.normalize(),n.crossVectors(i,s),0===n.lengthSq()&&(1===Math.abs(i.z)?s.x+=1e-4:s.z+=1e-4,s.normalize(),n.crossVectors(i,s)),n.normalize(),o.crossVectors(s,n),a[0]=n.x,a[4]=o.x,a[8]=s.x,a[1]=n.y,a[5]=o.y,a[9]=s.y,a[2]=n.z,a[6]=o.z,a[10]=s.z,this}}function i(t=0,r=0,e=0,i=1){this._x=t,this._y=r,this._z=e,this._w=void 0!==i?i:1}var n,o,s;Object.assign(i,{slerp:function(t,r,e,i){return e.copy(t).slerp(r,i)},slerpFlat:function(t,r,e,i,n,o,s){var a=e[i+0],h=e[i+1],u=e[i+2],f=e[i+3],l=n[o+0],c=n[o+1],p=n[o+2],m=n[o+3];if(f!==m||a!==l||h!==c||u!==p){var v=1-s,d=a*l+h*c+u*p+f*m,g=d>=0?1:-1,y=1-d*d;if(y>Number.EPSILON){var w=Math.sqrt(y),M=Math.atan2(w,d*g);v=Math.sin(v*M)/w,s=Math.sin(s*M)/w}var b=s*g;if(a=a*v+l*b,h=h*v+c*b,u=u*v+p*b,f=f*v+m*b,v===1-s){var _=1/Math.sqrt(a*a+h*h+u*u+f*f);a*=_,h*=_,u*=_,f*=_}}t[r]=a,t[r+1]=h,t[r+2]=u,t[r+3]=f}}),Object.defineProperties(i.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(i.prototype,{set:function(t,r,e,i){return this._x=t,this._y=r,this._z=e,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,r){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var e=t._x,i=t._y,n=t._z,o=t.order,s=Math.cos,a=Math.sin,h=s(e/2),u=s(i/2),f=s(n/2),l=a(e/2),c=a(i/2),p=a(n/2);return"XYZ"===o?(this._x=l*u*f+h*c*p,this._y=h*c*f-l*u*p,this._z=h*u*p+l*c*f,this._w=h*u*f-l*c*p):"YXZ"===o?(this._x=l*u*f+h*c*p,this._y=h*c*f-l*u*p,this._z=h*u*p-l*c*f,this._w=h*u*f+l*c*p):"ZXY"===o?(this._x=l*u*f-h*c*p,this._y=h*c*f+l*u*p,this._z=h*u*p+l*c*f,this._w=h*u*f-l*c*p):"ZYX"===o?(this._x=l*u*f-h*c*p,this._y=h*c*f+l*u*p,this._z=h*u*p-l*c*f,this._w=h*u*f+l*c*p):"YZX"===o?(this._x=l*u*f+h*c*p,this._y=h*c*f+l*u*p,this._z=h*u*p-l*c*f,this._w=h*u*f-l*c*p):"XZY"===o&&(this._x=l*u*f-h*c*p,this._y=h*c*f-l*u*p,this._z=h*u*p+l*c*f,this._w=h*u*f+l*c*p),!1!==r&&this.onChangeCallback(),this},setFromAxisAngle:function(t,r){var e=r/2,i=Math.sin(e);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(e),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var r,e=t.elements,i=e[0],n=e[4],o=e[8],s=e[1],a=e[5],h=e[9],u=e[2],f=e[6],l=e[10],c=i+a+l;return c>0?(r=.5/Math.sqrt(c+1),this._w=.25/r,this._x=(f-h)*r,this._y=(o-u)*r,this._z=(s-n)*r):i>a&&i>l?(r=2*Math.sqrt(1+i-a-l),this._w=(f-h)/r,this._x=.25*r,this._y=(n+s)/r,this._z=(o+u)/r):a>l?(r=2*Math.sqrt(1+a-i-l),this._w=(o-u)/r,this._x=(n+s)/r,this._y=.25*r,this._z=(h+f)/r):(r=2*Math.sqrt(1+l-i-a),this._w=(s-n)/r,this._x=(o+u)/r,this._y=(h+f)/r,this._z=.25*r),this.onChangeCallback(),this},setFromUnitVectors:(o=new r,function(t,e){return void 0===o&&(o=new r),(n=t.dot(e)+1)<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?o.set(-t.y,t.x,0):o.set(0,-t.z,t.y)):o.crossVectors(t,e),this._x=o.x,this._y=o.y,this._z=o.z,this._w=n,this.normalize()}),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,r){return void 0!==r?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,r)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,r){var e=t._x,i=t._y,n=t._z,o=t._w,s=r._x,a=r._y,h=r._z,u=r._w;return this._x=e*u+o*s+i*h-n*a,this._y=i*u+o*a+n*s-e*h,this._z=n*u+o*h+e*a-i*s,this._w=o*u-e*s-i*a-n*h,this.onChangeCallback(),this},slerp:function(t,r){if(0===r)return this;if(1===r)return this.copy(t);var e=this._x,i=this._y,n=this._z,o=this._w,s=o*t._w+e*t._x+i*t._y+n*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=e,this._y=i,this._z=n,this;var a=Math.sqrt(1-s*s);if(Math.abs(a)<.001)return this._w=.5*(o+this._w),this._x=.5*(e+this._x),this._y=.5*(i+this._y),this._z=.5*(n+this._z),this;var h=Math.atan2(a,s),u=Math.sin((1-r)*h)/a,f=Math.sin(r*h)/a;return this._w=o*u+this._w*f,this._x=e*u+this._x*f,this._y=i*u+this._y*f,this._z=n*u+this._z*f,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,r){return void 0===r&&(r=0),this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this.onChangeCallback(),this},toArray:function(t,r){return void 0===t&&(t=[]),void 0===r&&(r=0),t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}});!function(t){t[t.FRONT=0]="FRONT",t[t.BACK=1]="BACK",t[t.DOUBLE=2]="DOUBLE"}(s||(s={}));class a{constructor(t,r,e){let i=t.createShader(r);return t.shaderSource(i,e),t.compileShader(i),!1===t.getShaderParameter(i,t.COMPILE_STATUS)&&console.error("Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&(console.warn("gl.getShaderInfoLog()",r===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(i)),t.deleteShader(i)),i}}class h{constructor(t){this.gl=t,this.emptyTextures=[],this.emptyTextures[t.TEXTURE_2D]=this.createTexture(t.TEXTURE_2D,t.TEXTURE_2D,1),this.emptyTextures[t.TEXTURE_CUBE_MAP]=this.createTexture(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6)}getEmptyTexture(t){return this.emptyTextures[t]}createTexture(t,r,e){let i=this.gl;var n=new Uint8Array(4),o=i.createTexture();i.bindTexture(t,o),i.texParameteri(t,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(t,i.TEXTURE_MAG_FILTER,i.NEAREST);for(var s=0;s<e;s++)i.texImage2D(r+s,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,n);return o}static getInstance(t){return h.webGL||(h.webGL=new h(t)),h.webGL}}class u{constructor(t){this.unit=0,this.gl=t,this.textureCache=new WeakMap}createTexture(t,r,e){let i=this.gl;t.glTexture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,t.glTexture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r,e,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null)}setTexture2D(t,r){let e=this.gl,i=this.textureCache.get(t),n=this.unit;i||(i={version:0},this.textureCache.set(t,i),this.unit++),t.image&&t.version>0&&i.version!=t.version&&(t.glTexture=t.glTexture?t.glTexture:e.createTexture(),e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,t.glTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),i.version=t.version,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.image),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1)),e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,t.glTexture||h.getInstance(e).getEmptyTexture(e.TEXTURE_2D))}setTextureCube(t,r){let e=this.gl,i=this.textureCache.get(t),n=this.unit;if(i||(i={version:0},this.textureCache.set(t,i),this.unit++),t.images.length&&t.version>0&&i.version!=t.version){t.glTexture=t.glTexture?t.glTexture:e.createTexture(),e.activeTexture(e.TEXTURE0+this.unit),e.bindTexture(e.TEXTURE_CUBE_MAP,t.glTexture);for(let r=0;r<6;r++){let n=t.images[r];e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),i.version=t.version}e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_CUBE_MAP,t.glTexture||h.getInstance(e).getEmptyTexture(e.TEXTURE_CUBE_MAP))}}class f{constructor(t,r=1,e=1){if(this.state=new Proxy({needsUpdate:!1,version:0},{set:(t,r,e,i)=>{let n=Reflect.set(t,r,e,i);return"needsUpdate"===r&&!0===e&&this.version++,n}}),this.version=0,this.imageLoadedCount=0,this.image=null,this.images=[],t instanceof Array)this.imageCount=t.length,t.forEach(t=>{let r=new Image;r.onload=()=>{this.loadedCallback(),r.onload=null},r.src=t,this.images.push(r)});else if(t){let r=new Image;r.onload=()=>{this.loadedCallback(),r.onload=null},r.src=t,this.image=r,this.imageCount=1}this.format=r,this.type=e,this.needsUpdate=!1,this.glTexture=null}loadedCallback(){this.imageLoadedCount+=1,this.imageLoadedCount==this.imageCount&&(this.state.needsUpdate=!0)}clone(){return new f(void 0).copy(this)}copy(t){return this.image=t.image,this.format=t.format,this.type=t.type,this}}let l=new f;function c(t,r){t.uniform1f(this.addr,r)}function p(t,r){t.uniform1i(this.addr,r)}function m(t,r){void 0===r.x?t.uniform2fv(this.addr,r):t.uniform2f(this.addr,r.x,r.y)}function v(t,r){void 0!==r.x?t.uniform3f(this.addr,r.x,r.y,r.z):void 0!==r.r?t.uniform3f(this.addr,r.r,r.g,r.b):t.uniform3fv(this.addr,r)}function d(t,r){void 0===r.x?t.uniform4fv(this.addr,r):t.uniform4f(this.addr,r.x,r.y,r.z,r.w)}function g(t,r){t.uniformMatrix2fv(this.addr,!1,r.elements||r)}function y(t,r){t.uniformMatrix3fv(this.addr,!1,r.elements||r)}function w(t,r){t.uniformMatrix4fv(this.addr,!1,r.elements||r)}function M(t,r,e){t.uniform1i(this.addr,e.unit),e.setTexture2D(r||l)}function b(t,r,e){t.uniform1i(this.addr,e.unit),e.setTextureCube(r)}function _(t,r){t.uniform2iv(this.addr,r)}function x(t,r){t.uniform3iv(this.addr,r)}function E(t,r){t.uniform4iv(this.addr,r)}function A(t,r,e){this.id=t,this.addr=e,this.setValue=function(t){switch(t){case 5126:return c;case 35664:return m;case 35665:return v;case 35666:return d;case 35674:return g;case 35675:return y;case 35676:return w;case 35678:return M;case 35680:return b;case 5124:case 35670:return p;case 35667:case 35671:return _;case 35668:case 35672:return x;case 35669:case 35673:return E}}(r.type)}var T,R=[];function U(t,r,e){var i=t[0];if(i<=0||i>0)return t;var n=r*e,o=R[n];if(void 0===o&&(o=new Float32Array(n),R[n]=o),0!==r){i.toArray(o,0);for(var s=1,a=0;s!==r;++s)a+=e,t[s].toArray(o,a)}return o}function I(t,r){t.uniform1fv(this.addr,r)}function P(t,r){t.uniform1iv(this.addr,r)}function B(t,r){t.uniform2fv(this.addr,U(r,this.size,2))}function S(t,r){t.uniform3fv(this.addr,U(r,this.size,3))}function C(t,r){t.uniform4fv(this.addr,U(r,this.size,4))}function z(t,r){t.uniformMatrix2fv(this.addr,!1,U(r,this.size,4))}function k(t,r){t.uniformMatrix3fv(this.addr,!1,U(r,this.size,9))}function O(t,r){t.uniformMatrix4fv(this.addr,!1,U(r,this.size,16))}function N(t,r,e){this.id=t,this.addr=e,this.size=r.size,this.setValue=function(t){switch(t){case 5126:return I;case 35664:return B;case 35665:return S;case 35666:return C;case 35674:return z;case 35675:return k;case 35676:return O;case 5124:case 35670:return P;case 35667:case 35671:return _;case 35668:case 35672:return x;case 35669:case 35673:return E}}(r.type)}class L{constructor(t,r){this.textureManager=new u(t),this.gl=t,this.map={},this.seq=[];for(var e=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),i=0;i!==e;++i){var n=t.getActiveUniform(r,i),o=n.name,s=t.getUniformLocation(r,o);this.parseUniform(n,s,this)}}addUniform(t,r){t.seq.push(r),t.map[r.id]=r}parseUniform(t,r,e){var i=/([\w\d_]+)(\])?(\[|\.)?/g,n=t.name,o=n.length;for(i.lastIndex=0;;){var s=i.exec(n),a=i.lastIndex,h=s[1],u="]"===s[2],f=s[3];if(u&&(h+=0),void 0===f||"["===f&&a+2===o){this.addUniform(e,void 0===f?new A(h,t,r):new N(h,t,r));break}e=e.map[h]}}updateUniforms(t={}){this.textureManager.unit=0;let r=this.filterUniforms(Object.keys(t));for(var e=0,i=r.length;e!==i;++e){var n=r[e],o=t[n.id];!1!==o.needsUpdate&&n.setValue(this.gl,o.value,this.textureManager)}}filterUniforms(t){for(var r=[],e=0,i=this.seq.length;e!==i;++e){var n=this.seq[e];-1!=t.indexOf(n.id)&&r.push(n)}return r}}class j{constructor(t,r){this.program=t.createProgram();let e=new a(t,t.VERTEX_SHADER,r.vertexShader),i=new a(t,t.FRAGMENT_SHADER,r.fragmentShader);t.attachShader(this.program,e),t.attachShader(this.program,i),t.linkProgram(this.program);let n=t.getProgramInfoLog(this.program).trim();!1===t.getProgramParameter(this.program,t.LINK_STATUS)?console.error("shader error: ",t.getError(),"gl.VALIDATE_STATUS",t.getProgramParameter(this.program,t.VALIDATE_STATUS),"gl.getProgramInfoLog",n):""!==n&&console.warn("gl.getProgramInfoLog()",n),t.useProgram(this.program),t.deleteShader(e),t.deleteShader(i),this.uniformManager=new L(t,this.program)}}class F{constructor(){this.programCache=new Map}getProgram(t,r){let e=this.getProgramCacheKey(r),i=this.programCache.get(e);return i||(i=new j(t,r),this.programCache.set(e,i)),i}getProgramCacheKey(t){let r=[];return r.push(t.fragmentShader),r.push(t.vertexShader),r.join()}}class D{constructor(t,e){this.min=void 0!==t?t:new r(1/0,1/0,1/0),this.max=void 0!==e?e:new r(-1/0,-1/0,-1/0)}}class Y{constructor(){this.attributes=new Map,this.index=null,this.boundingBox=new D}addAttribute(t,r){"index"===t?this.index=r:this.attributes.set(t,r)}}class q{constructor(t,r=!1){this.itemSize=t,this.normalized=r}setXY(t,r,e){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=e,this}setXYZ(t,r,e,i){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=e,this.array[t+2]=i,this}}class X extends q{constructor(t,r,e=!1){super(r,e),t instanceof Float32Array?this.array=t:this.array=new Float32Array(t)}}class G extends q{constructor(t,r,e=!1){super(r,e),t instanceof Uint32Array?this.array=t:this.array=new Uint32Array(t)}}class V{constructor(t={},r=!0){this.positions=t.positions||[],this.cells=t.cells||[],this.sameIndex=r,this.vertexUVs=t.vertexUVs,this.faceUVs=t.faceUVs,this.vertexNormals=t.vertexNormals,this.faceNormals=t.faceNormals,this.normalIndices=t.normalIndices}toBufferGeometry(){let t=new Y,r=[],e=[],i=[];if(this.sameIndex)t.addAttribute("index",new G(this.cells.flat(),1)),r=this.positions.flat(),this.vertexNormals&&(e=this.vertexNormals.flat()),this.vertexUVs&&(i=this.vertexUVs.flat());else for(let t=0;t<this.cells.length;t++){if(this.cells[t].forEach(t=>{this.positions[t].forEach(t=>{r.push(t)})}),this.normalIndices){let r=this.normalIndices[t];console.log(r),r.forEach(t=>{this.vertexNormals[t].forEach(t=>{e.push(t)})})}this.faceUVs.length&&this.faceUVs[t].forEach(t=>{this.vertexUVs[t].forEach(t=>{i.push(t)})})}return t.addAttribute("position",new X(r,3)),t.addAttribute("normal",new X(e,3)),t.addAttribute("uv",new X(i,2)),t}}function Z(t){return[t[0],t[1]]}function W(t,r){return[t,r]}!function(t){t[t.PERSPECTIVE=0]="PERSPECTIVE",t[t.ORTHOGRAPHIC=1]="ORTHOGRAPHIC"}(T||(T={}));var H,Q,K,J,$,tt,rt,et=(Q="number"==typeof(H=H||{}).recursion?H.recursion:8,K="number"==typeof H.epsilon?H.epsilon:1.1920929e-7,J="number"==typeof H.pathEpsilon?H.pathEpsilon:1,$="number"==typeof H.angleEpsilon?H.angleEpsilon:.01,tt=H.angleTolerance||0,rt=H.cuspLimit||0,function(t,r,e,i,n,o){o||(o=[]);var s=J/(n="number"==typeof n?n:1);return function(t,r,e,i,n,o){n.push(Z(t));var s=t[0],a=t[1],h=r[0],u=r[1],f=e[0],l=e[1],c=i[0],p=i[1];(function t(r,e,i,n,o,s,a,h,u,f,l){if(!(l>Q)){var c=Math.PI,p=(r+i)/2,m=(e+n)/2,v=(i+o)/2,d=(n+s)/2,g=(o+a)/2,y=(s+h)/2,w=(p+v)/2,M=(m+d)/2,b=(v+g)/2,_=(d+y)/2,x=(w+b)/2,E=(M+_)/2;if(l>0){var A,T,R=a-r,U=h-e,I=Math.abs((i-a)*U-(n-h)*R),P=Math.abs((o-a)*U-(s-h)*R);if(I>K&&P>K){if((I+P)*(I+P)<=f*(R*R+U*U)){if(tt<$)return void u.push(W(x,E));var B=Math.atan2(s-n,o-i);if(A=Math.abs(B-Math.atan2(n-e,i-r)),T=Math.abs(Math.atan2(h-s,a-o)-B),A>=c&&(A=2*c-A),T>=c&&(T=2*c-T),A+T<tt)return void u.push(W(x,E));if(0!==rt){if(A>rt)return void u.push(W(i,n));if(T>rt)return void u.push(W(o,s))}}}else if(I>K){if(I*I<=f*(R*R+U*U)){if(tt<$)return void u.push(W(x,E));if((A=Math.abs(Math.atan2(s-n,o-i)-Math.atan2(n-e,i-r)))>=c&&(A=2*c-A),A<tt)return u.push(W(i,n)),void u.push(W(o,s));if(0!==rt&&A>rt)return void u.push(W(i,n))}}else if(P>K){if(P*P<=f*(R*R+U*U)){if(tt<$)return void u.push(W(x,E));if((A=Math.abs(Math.atan2(h-s,a-o)-Math.atan2(s-n,o-i)))>=c&&(A=2*c-A),A<tt)return u.push(W(i,n)),void u.push(W(o,s));if(0!==rt&&A>rt)return void u.push(W(o,s))}}else if((R=x-(r+a)/2)*R+(U=E-(e+h)/2)*U<=f)return void u.push(W(x,E))}t(r,e,p,m,w,M,x,E,u,f,l+1),t(x,E,b,_,g,y,a,h,u,f,l+1)}})(s,a,h,u,f,l,c,p,n,o,0),n.push(Z(i))}(t,r,e,i,o,s*=s),o}),it=function(t){var r=0,e=0,i=0,n=0;return t.map((function(t){var o=(t=t.slice())[0],s=o.toUpperCase();if(o!=s)switch(t[0]=s,o){case"a":t[6]+=i,t[7]+=n;break;case"v":t[1]+=n;break;case"h":t[1]+=i;break;default:for(var a=1;a<t.length;)t[a++]+=i,t[a++]+=n}switch(s){case"Z":i=r,n=e;break;case"H":i=t[1];break;case"V":n=t[1];break;case"M":i=r=t[1],n=e=t[2];break;default:i=t[t.length-2],n=t[t.length-1]}return t}))};var nt=Math.PI,ot=lt(120),st=function(t){for(var r,e=[],i=0,n=0,o=0,s=0,a=null,h=null,u=0,f=0,l=0,c=t.length;l<c;l++){var p=t[l],m=p[0];switch(m){case"M":o=p[1],s=p[2];break;case"A":(p=ut(u,f,p[1],p[2],lt(p[3]),p[4],p[5],p[6],p[7])).unshift("C"),p.length>7&&(e.push(p.splice(0,7)),p.unshift("C"));break;case"S":var v=u,d=f;"C"!=r&&"S"!=r||(v+=v-i,d+=d-n),p=["C",v,d,p[1],p[2],p[3],p[4]];break;case"T":"Q"==r||"T"==r?(a=2*u-a,h=2*f-h):(a=u,h=f),p=ht(u,f,a,h,p[1],p[2]);break;case"Q":a=p[1],h=p[2],p=ht(u,f,p[1],p[2],p[3],p[4]);break;case"L":p=at(u,f,p[1],p[2]);break;case"H":p=at(u,f,p[1],f);break;case"V":p=at(u,f,u,p[1]);break;case"Z":p=at(u,f,o,s)}r=m,u=p[p.length-2],f=p[p.length-1],p.length>4?(i=p[p.length-4],n=p[p.length-3]):(i=u,n=f),e.push(p)}return e};function at(t,r,e,i){return["C",t,r,e,i,e,i]}function ht(t,r,e,i,n,o){return["C",t/3+2/3*e,r/3+2/3*i,n/3+2/3*e,o/3+2/3*i,n,o]}function ut(t,r,e,i,n,o,s,a,h,u){if(u)w=u[0],M=u[1],g=u[2],y=u[3];else{var f=ft(t,r,-n);t=f.x,r=f.y;var l=(t-(a=(f=ft(a,h,-n)).x))/2,c=(r-(h=f.y))/2,p=l*l/(e*e)+c*c/(i*i);p>1&&(e*=p=Math.sqrt(p),i*=p);var m=e*e,v=i*i,d=(o==s?-1:1)*Math.sqrt(Math.abs((m*v-m*c*c-v*l*l)/(m*c*c+v*l*l)));d==1/0&&(d=1);var g=d*e*c/i+(t+a)/2,y=d*-i*l/e+(r+h)/2,w=Math.asin(((r-y)/i).toFixed(9)),M=Math.asin(((h-y)/i).toFixed(9));(w=t<g?nt-w:w)<0&&(w=2*nt+w),(M=a<g?nt-M:M)<0&&(M=2*nt+M),s&&w>M&&(w-=2*nt),!s&&M>w&&(M-=2*nt)}if(Math.abs(M-w)>ot){var b=M,_=a,x=h;M=w+ot*(s&&M>w?1:-1);var E=ut(a=g+e*Math.cos(M),h=y+i*Math.sin(M),e,i,n,0,s,_,x,[M,b,g,y])}var A=Math.tan((M-w)/4),T=4/3*e*A,R=4/3*i*A,U=[2*t-(t+T*Math.sin(w)),2*r-(r-R*Math.cos(w)),a+T*Math.sin(M),h-R*Math.cos(M),a,h];if(u)return U;E&&(U=U.concat(E));for(var I=0;I<U.length;){var P=ft(U[I],U[I+1],n);U[I++]=P.x,U[I++]=P.y}return U}function ft(t,r,e){return{x:t*Math.cos(e)-r*Math.sin(e),y:t*Math.sin(e)+r*Math.cos(e)}}function lt(t){return t*(nt/180)}function ct(t,r,e,i,n){var o=["function ",t,"(a,l,h,",i.join(","),"){",n?"":"var i=",e?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return n?r.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",r,"){i=m;"),e?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),n?o.push("return -1};"):o.push("return i};"),o.join("")}function pt(t,r,e,i){return new Function([ct("A","x"+t+"y",r,["y"],i),ct("P","c(x,y)"+t+"0",r,["y","c"],i),"function dispatchBsearch",e,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",e].join(""))()}var mt={ge:pt(">=",!1,"GE"),gt:pt(">",!1,"GT"),lt:pt("<",!0,"LT"),le:pt("<=",!0,"LE"),eq:pt("-",!0,"EQ",!0)},vt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function dt(t,r){return t(r={exports:{}},r.exports),r.exports}var gt=function(t,r,e){var i=t*r,n=yt*t,o=n-(n-t),s=t-o,a=yt*r,h=a-(a-r),u=r-h,f=s*u-(i-o*h-s*h-o*u);if(e)return e[0]=f,e[1]=i,e;return[f,i]},yt=+(Math.pow(2,27)+1);var wt=function(t,r){var e=0|t.length,i=0|r.length;if(1===e&&1===i)return function(t,r){var e=t+r,i=e-t,n=t-(e-i)+(r-i);if(n)return[n,e];return[e]}(t[0],r[0]);var n,o,s=new Array(e+i),a=0,h=0,u=0,f=Math.abs,l=t[h],c=f(l),p=r[u],m=f(p);c<m?(o=l,(h+=1)<e&&(l=t[h],c=f(l))):(o=p,(u+=1)<i&&(p=r[u],m=f(p)));h<e&&c<m||u>=i?(n=l,(h+=1)<e&&(l=t[h],c=f(l))):(n=p,(u+=1)<i&&(p=r[u],m=f(p)));var v,d,g=n+o,y=g-n,w=o-y,M=w,b=g;for(;h<e&&u<i;)c<m?(n=l,(h+=1)<e&&(l=t[h],c=f(l))):(n=p,(u+=1)<i&&(p=r[u],m=f(p))),(w=(o=M)-(y=(g=n+o)-n))&&(s[a++]=w),M=b-((v=b+g)-(d=v-b))+(g-d),b=v;for(;h<e;)(w=(o=M)-(y=(g=(n=l)+o)-n))&&(s[a++]=w),M=b-((v=b+g)-(d=v-b))+(g-d),b=v,(h+=1)<e&&(l=t[h]);for(;u<i;)(w=(o=M)-(y=(g=(n=p)+o)-n))&&(s[a++]=w),M=b-((v=b+g)-(d=v-b))+(g-d),b=v,(u+=1)<i&&(p=r[u]);M&&(s[a++]=M);b&&(s[a++]=b);a||(s[a++]=0);return s.length=a,s};var Mt=function(t,r,e){var i=t+r,n=i-t,o=r-n,s=t-(i-n);if(e)return e[0]=s+o,e[1]=i,e;return[s+o,i]};var bt=function(t,r){var e=t.length;if(1===e){var i=gt(t[0],r);return i[0]?i:[i[1]]}var n=new Array(2*e),o=[.1,.1],s=[.1,.1],a=0;gt(t[0],r,o),o[0]&&(n[a++]=o[0]);for(var h=1;h<e;++h){gt(t[h],r,s);var u=o[1];Mt(u,s[0],o),o[0]&&(n[a++]=o[0]);var f=s[1],l=o[1],c=f+l,p=l-(c-f);o[1]=c,p&&(n[a++]=p)}o[1]&&(n[a++]=o[1]);0===a&&(n[a++]=0);return n.length=a,n};var _t=function(t,r){var e=0|t.length,i=0|r.length;if(1===e&&1===i)return function(t,r){var e=t+r,i=e-t,n=t-(e-i)+(r-i);if(n)return[n,e];return[e]}(t[0],-r[0]);var n,o,s=new Array(e+i),a=0,h=0,u=0,f=Math.abs,l=t[h],c=f(l),p=-r[u],m=f(p);c<m?(o=l,(h+=1)<e&&(l=t[h],c=f(l))):(o=p,(u+=1)<i&&(p=-r[u],m=f(p)));h<e&&c<m||u>=i?(n=l,(h+=1)<e&&(l=t[h],c=f(l))):(n=p,(u+=1)<i&&(p=-r[u],m=f(p)));var v,d,g=n+o,y=g-n,w=o-y,M=w,b=g;for(;h<e&&u<i;)c<m?(n=l,(h+=1)<e&&(l=t[h],c=f(l))):(n=p,(u+=1)<i&&(p=-r[u],m=f(p))),(w=(o=M)-(y=(g=n+o)-n))&&(s[a++]=w),M=b-((v=b+g)-(d=v-b))+(g-d),b=v;for(;h<e;)(w=(o=M)-(y=(g=(n=l)+o)-n))&&(s[a++]=w),M=b-((v=b+g)-(d=v-b))+(g-d),b=v,(h+=1)<e&&(l=t[h]);for(;u<i;)(w=(o=M)-(y=(g=(n=p)+o)-n))&&(s[a++]=w),M=b-((v=b+g)-(d=v-b))+(g-d),b=v,(u+=1)<i&&(p=-r[u]);M&&(s[a++]=M);b&&(s[a++]=b);a||(s[a++]=0);return s.length=a,s};var xt=dt((function(t){function r(t,r){for(var e=new Array(t.length-1),i=1;i<t.length;++i)for(var n=e[i-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==r&&(n[s++]=t[i][o]);return e}function e(t){return 1&t?"-":""}function i(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var r=t.length>>1;return["sum(",i(t.slice(0,r)),",",i(t.slice(r)),")"].join("")}function n(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],s=0;s<t.length;++s)o.push(["scale(",i(n(r(t,s))),",",e(s),t[0][s],")"].join(""));return o}function o(t){for(var e=[],o=[],s=function(t){for(var r=new Array(t),e=0;e<t;++e){r[e]=new Array(t);for(var i=0;i<t;++i)r[e][i]=["m",i,"[",t-e-1,"]"].join("")}return r}(t),a=[],h=0;h<t;++h)0==(1&h)?e.push.apply(e,n(r(s,h))):o.push.apply(o,n(r(s,h))),a.push("m"+h);var u=i(e),f=i(o),l="orientation"+t+"Exact",c=["function ",l,"(",a.join(),"){var p=",u,",n=",f,",d=sub(p,n);return d[d.length-1];};return ",l].join("");return new Function("sum","prod","scale","sub",c)(wt,gt,bt,_t)}var s=o(3),a=o(4),h=[function(){return 0},function(){return 0},function(t,r){return r[0]-t[0]},function(t,r,e){var i,n=(t[1]-e[1])*(r[0]-e[0]),o=(t[0]-e[0])*(r[1]-e[1]),a=n-o;if(n>0){if(o<=0)return a;i=n+o}else{if(!(n<0))return a;if(o>=0)return a;i=-(n+o)}var h=33306690738754716e-32*i;return a>=h||a<=-h?a:s(t,r,e)},function(t,r,e,i){var n=t[0]-i[0],o=r[0]-i[0],s=e[0]-i[0],h=t[1]-i[1],u=r[1]-i[1],f=e[1]-i[1],l=t[2]-i[2],c=r[2]-i[2],p=e[2]-i[2],m=o*f,v=s*u,d=s*h,g=n*f,y=n*u,w=o*h,M=l*(m-v)+c*(d-g)+p*(y-w),b=7771561172376103e-31*((Math.abs(m)+Math.abs(v))*Math.abs(l)+(Math.abs(d)+Math.abs(g))*Math.abs(c)+(Math.abs(y)+Math.abs(w))*Math.abs(p));return M>b||-M>b?M:a(t,r,e,i)}];function u(t){var r=h[t.length];return r||(r=h[t.length]=o(t.length)),r.apply(void 0,t)}!function(){for(;h.length<=5;)h.push(o(h.length));for(var r=[],e=["slow"],i=0;i<=5;++i)r.push("a"+i),e.push("o"+i);var n=["function getOrientation(",r.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=5;++i)n.push("case ",i,":return o",i,"(",r.slice(0,i).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),e.push(n.join(""));var s=Function.apply(void 0,e);for(t.exports=s.apply(void 0,[u].concat(h)),i=0;i<=5;++i)t.exports[i]=h[i]}()})),Et=xt[3],At=function(t,r){for(var e=t.length,i=r.length,n=[],o=0;o<e;++o)n.push(new Rt(t[o],null,0,o));for(o=0;o<i;++o){var s=r[o],a=t[s[0]],h=t[s[1]];a[0]<h[0]?n.push(new Rt(a,h,2,o),new Rt(h,a,1,o)):a[0]>h[0]&&n.push(new Rt(h,a,2,o),new Rt(a,h,1,o))}n.sort(Ut);for(var u=n[0].a[0]-(1+Math.abs(n[0].a[0]))*Math.pow(2,-52),f=[new Tt([u,1],[u,0],-1,[],[],[],[])],l=[],c=(o=0,n.length);o<c;++o){var p=n[o],m=p.type;0===m?Pt(l,f,t,p.a,p.idx):2===m?St(f,t,p):Ct(f,t,p)}return l};function Tt(t,r,e,i,n){this.a=t,this.b=r,this.idx=e,this.lowerIds=i,this.upperIds=n}function Rt(t,r,e,i){this.a=t,this.b=r,this.type=e,this.idx=i}function Ut(t,r){var e=t.a[0]-r.a[0]||t.a[1]-r.a[1]||t.type-r.type;return e||(0!==t.type&&(e=Et(t.a,t.b,r.b))?e:t.idx-r.idx)}function It(t,r){return Et(t.a,t.b,r)}function Pt(t,r,e,i,n){for(var o=mt.lt(r,i,It),s=mt.gt(r,i,It),a=o;a<s;++a){for(var h=r[a],u=h.lowerIds,f=u.length;f>1&&Et(e[u[f-2]],e[u[f-1]],i)>0;)t.push([u[f-1],u[f-2],n]),f-=1;u.length=f,u.push(n);var l=h.upperIds;for(f=l.length;f>1&&Et(e[l[f-2]],e[l[f-1]],i)<0;)t.push([l[f-2],l[f-1],n]),f-=1;l.length=f,l.push(n)}}function Bt(t,r){var e;return(e=t.a[0]<r.a[0]?Et(t.a,t.b,r.a):Et(r.b,r.a,t.a))?e:(e=r.b[0]<t.b[0]?Et(t.a,t.b,r.b):Et(r.b,r.a,t.b))||t.idx-r.idx}function St(t,r,e){var i=mt.le(t,e,Bt),n=t[i],o=n.upperIds,s=o[o.length-1];n.upperIds=[s],t.splice(i+1,0,new Tt(e.a,e.b,e.idx,[s],o))}function Ct(t,r,e){var i=e.a;e.a=e.b,e.b=i;var n=mt.eq(t,e,Bt),o=t[n];t[n-1].upperIds=o.upperIds,t.splice(n,1)}var zt=function(t,r){for(var e=new Array(t),i=0;i<t;++i)e[i]=[];return new kt(e,r)};function kt(t,r){this.stars=t,this.edges=r}var Ot=kt.prototype;function Nt(t,r,e){for(var i=1,n=t.length;i<n;i+=2)if(t[i-1]===r&&t[i]===e)return t[i-1]=t[n-2],t[i]=t[n-1],void(t.length=n-2)}Ot.isConstraint=function(){var t=[0,0];function r(t,r){return t[0]-r[0]||t[1]-r[1]}return function(e,i){return t[0]=Math.min(e,i),t[1]=Math.max(e,i),mt.eq(this.edges,t,r)>=0}}(),Ot.removeTriangle=function(t,r,e){var i=this.stars;Nt(i[t],r,e),Nt(i[r],e,t),Nt(i[e],t,r)},Ot.addTriangle=function(t,r,e){var i=this.stars;i[t].push(r,e),i[r].push(e,t),i[e].push(t,r)},Ot.opposite=function(t,r){for(var e=this.stars[r],i=1,n=e.length;i<n;i+=2)if(e[i]===t)return e[i-1];return-1},Ot.flip=function(t,r){var e=this.opposite(t,r),i=this.opposite(r,t);this.removeTriangle(t,r,e),this.removeTriangle(r,t,i),this.addTriangle(t,i,e),this.addTriangle(r,e,i)},Ot.edges=function(){for(var t=this.stars,r=[],e=0,i=t.length;e<i;++e)for(var n=t[e],o=0,s=n.length;o<s;o+=2)r.push([n[o],n[o+1]]);return r},Ot.cells=function(){for(var t=this.stars,r=[],e=0,i=t.length;e<i;++e)for(var n=t[e],o=0,s=n.length;o<s;o+=2){var a=n[o],h=n[o+1];e<Math.min(a,h)&&r.push([e,a,h])}return r};var Lt=dt((function(t){function r(t,r){for(var e=new Array(t.length-1),i=1;i<t.length;++i)for(var n=e[i-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==r&&(n[s++]=t[i][o]);return e}function e(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var r=t.length>>1;return["sum(",e(t.slice(0,r)),",",e(t.slice(r)),")"].join("")}function i(t,r){if("m"===t.charAt(0)){if("w"===r.charAt(0)){var e=t.split("[");return["w",r.substr(1),"m",e[0].substr(1)].join("")}return["prod(",t,",",r,")"].join("")}return i(r,t)}function n(t){return!0&t?"-":""}function o(t){if(2===t.length)return[["diff(",i(t[0][0],t[1][1]),",",i(t[1][0],t[0][1]),")"].join("")];for(var s=[],a=0;a<t.length;++a)s.push(["scale(",e(o(r(t,a))),",",n(a),t[0][a],")"].join(""));return s}function s(t,r){for(var i=[],n=0;n<r-2;++n)i.push(["prod(m",t,"[",n,"],m",t,"[",n,"])"].join(""));return e(i)}function a(t){for(var i=[],n=[],a=function(t){for(var r=new Array(t),e=0;e<t;++e){r[e]=new Array(t);for(var i=0;i<t;++i)r[e][i]=["m",i,"[",t-e-2,"]"].join("")}return r}(t),h=0;h<t;++h)a[0][h]="1",a[t-1][h]="w"+h;for(h=0;h<t;++h)0==(1&h)?i.push.apply(i,o(r(a,h))):n.push.apply(n,o(r(a,h)));var u=e(i),f=e(n),l="exactInSphere"+t,c=[];for(h=0;h<t;++h)c.push("m"+h);var p=["function ",l,"(",c.join(),"){"];for(h=0;h<t;++h){p.push("var w",h,"=",s(h,t),";");for(var m=0;m<t;++m)m!==h&&p.push("var w",h,"m",m,"=scale(w",h,",m",m,"[0]);")}return p.push("var p=",u,",n=",f,",d=diff(p,n);return d[d.length-1];}return ",l),new Function("sum","diff","prod","scale",p.join(""))(wt,_t,gt,bt)}var h=[function(){return 0},function(){return 0},function(){return 0}];function u(t){var r=h[t.length];return r||(r=h[t.length]=a(t.length)),r.apply(void 0,t)}!function(){for(;h.length<=6;)h.push(a(h.length));for(var r=[],e=["slow"],i=0;i<=6;++i)r.push("a"+i),e.push("o"+i);var n=["function testInSphere(",r.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=6;++i)n.push("case ",i,":return o",i,"(",r.slice(0,i).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),e.push(n.join(""));var o=Function.apply(void 0,e);for(t.exports=o.apply(void 0,[u].concat(h)),i=0;i<=6;++i)t.exports[i]=h[i]}()}))[4],jt=function(t,r){for(var e=[],i=t.length,n=r.stars,o=0;o<i;++o)for(var s=n[o],a=1;a<s.length;a+=2){if(!((l=s[a])<o)&&!r.isConstraint(o,l)){for(var h=s[a-1],u=-1,f=1;f<s.length;f+=2)if(s[f-1]===l){u=s[f];break}u<0||Lt(t[o],t[l],t[h],t[u])<0&&e.push(o,l)}}for(;e.length>0;){for(var l=e.pop(),c=(o=e.pop(),h=-1,u=-1,s=n[o],1);c<s.length;c+=2){var p=s[c-1],m=s[c];p===l?u=m:m===l&&(h=p)}h<0||u<0||(Lt(t[o],t[l],t[h],t[u])>=0||(r.flip(o,l),Ft(t,r,e,h,o,u),Ft(t,r,e,o,u,h),Ft(t,r,e,u,l,h),Ft(t,r,e,l,h,u)))}};function Ft(t,r,e,i,n,o){var s=r.opposite(i,n);if(!(s<0)){if(n<i){var a=i;i=n,n=a,a=o,o=s,s=a}r.isConstraint(i,n)||Lt(t[i],t[n],t[o],t[s])<0&&e.push(i,n)}}var Dt,Yt=function(t,r,e){var i=function(t,r){for(var e=t.cells(),i=e.length,n=0;n<i;++n){var o=(v=e[n])[0],s=v[1],a=v[2];s<a?s<o&&(v[0]=s,v[1]=a,v[2]=o):a<o&&(v[0]=a,v[1]=o,v[2]=s)}e.sort(Xt);var h=new Array(i);for(n=0;n<h.length;++n)h[n]=0;var u=[],f=[],l=new Array(3*i),c=new Array(3*i),p=null;r&&(p=[]);var m=new qt(e,l,c,h,u,f,p);for(n=0;n<i;++n)for(var v=e[n],d=0;d<3;++d){o=v[d],s=v[(d+1)%3];var g=l[3*n+d]=m.locate(s,o,t.opposite(s,o)),y=c[3*n+d]=t.isConstraint(o,s);g<0&&(y?f.push(n):(u.push(n),h[n]=1),r&&p.push([s,o,-1]))}return m}(t,e);if(0===r)return e?i.cells.concat(i.boundary):i.cells;var n=1,o=i.active,s=i.next,a=i.flags,h=i.cells,u=i.constraint,f=i.neighbor;for(;o.length>0||s.length>0;){for(;o.length>0;){var l=o.pop();if(a[l]!==-n){a[l]=n;h[l];for(var c=0;c<3;++c){var p=f[3*l+c];p>=0&&0===a[p]&&(u[3*l+c]?s.push(p):(o.push(p),a[p]=n))}}}var m=s;s=o,o=m,s.length=0,n=-n}var v=function(t,r,e){for(var i=0,n=0;n<t.length;++n)r[n]===e&&(t[i++]=t[n]);return t.length=i,t}(h,a,r);if(e)return v.concat(i.boundary);return v};function qt(t,r,e,i,n,o,s){this.cells=t,this.neighbor=r,this.flags=i,this.constraint=e,this.active=n,this.next=o,this.boundary=s}function Xt(t,r){return t[0]-r[0]||t[1]-r[1]||t[2]-r[2]}qt.prototype.locate=(Dt=[0,0,0],function(t,r,e){var i=t,n=r,o=e;return r<e?r<t&&(i=r,n=e,o=t):e<t&&(i=e,n=t,o=r),i<0?-1:(Dt[0]=i,Dt[1]=n,Dt[2]=o,mt.eq(this.cells,Dt,Xt))});var Gt=Vt;function Vt(t){this.roots=new Array(t),this.ranks=new Array(t);for(var r=0;r<t;++r)this.roots[r]=r,this.ranks[r]=0}var Zt=Vt.prototype;Object.defineProperty(Zt,"length",{get:function(){return this.roots.length}}),Zt.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},Zt.find=function(t){for(var r=t,e=this.roots;e[t]!==t;)t=e[t];for(;e[r]!==t;){var i=e[r];e[r]=t,r=i}return t},Zt.link=function(t,r){var e=this.find(t),i=this.find(r);if(e!==i){var n=this.ranks,o=this.roots,s=n[e],a=n[i];s<a?o[e]=i:a<s?o[i]=e:(o[i]=e,++n[e])}};function Wt(t){var r=32;return(t&=-t)&&r--,65535&t&&(r-=16),16711935&t&&(r-=8),252645135&t&&(r-=4),858993459&t&&(r-=2),1431655765&t&&(r-=1),r}var Ht=Wt,Qt=new Array(256);!function(t){for(var r=0;r<256;++r){var e=r,i=r,n=7;for(e>>>=1;e;e>>>=1)i<<=1,i|=1&e,--n;t[r]=i<<n&255}}(Qt);var Kt={INT_BITS:32,INT_MAX:2147483647,INT_MIN:-1<<31,sign:function(t){return(t>0)-(t<0)},abs:function(t){var r=t>>31;return(t^r)-r},min:function(t,r){return r^(t^r)&-(t<r)},max:function(t,r){return t^(t^r)&-(t<r)},isPow2:function(t){return!(t&t-1||!t)},log2:function(t){var r,e;return r=(t>65535)<<4,r|=e=((t>>>=r)>255)<<3,r|=e=((t>>>=e)>15)<<2,(r|=e=((t>>>=e)>3)<<1)|(t>>>=e)>>1},log10:function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},popCount:function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},countTrailingZeros:Ht,nextPow2:function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},prevPow2:function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},parity:function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1},reverse:function(t){return Qt[255&t]<<24|Qt[t>>>8&255]<<16|Qt[t>>>16&255]<<8|Qt[t>>>24&255]},interleave2:function(t,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},deinterleave2:function(t,r){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>r&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},interleave3:function(t,r,e){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},deinterleave3:function(t,r){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>r&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},nextCombination:function(t){var r=t|t-1;return r+1|(~r&-~r)-1>>>Wt(t)+1}};var Jt=function(t,r){switch(void 0===r&&(r=0),typeof t){case"number":if(t>0)return function(t,r){var e,i;for(e=new Array(t),i=0;i<t;++i)e[i]=r;return e}(0|t,r);break;case"object":if("number"==typeof t.length)return function t(r,e,i){var n=0|r[i];if(n<=0)return[];var o,s=new Array(n);if(i===r.length-1)for(o=0;o<n;++o)s[o]=e;else for(o=0;o<n;++o)s[o]=t(r,e,i+1);return s}(t,r,0)}return[]},$t=[],tr=[],rr="undefined"!=typeof Uint8Array?Uint8Array:Array,er=!1;function ir(){er=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,e=t.length;r<e;++r)$t[r]=t[r],tr[t.charCodeAt(r)]=r;tr["-".charCodeAt(0)]=62,tr["_".charCodeAt(0)]=63}function nr(t,r,e){for(var i,n,o=[],s=r;s<e;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push($t[(n=i)>>18&63]+$t[n>>12&63]+$t[n>>6&63]+$t[63&n]);return o.join("")}function or(t){var r;er||ir();for(var e=t.length,i=e%3,n="",o=[],s=0,a=e-i;s<a;s+=16383)o.push(nr(t,s,s+16383>a?a:s+16383));return 1===i?(r=t[e-1],n+=$t[r>>2],n+=$t[r<<4&63],n+="=="):2===i&&(r=(t[e-2]<<8)+t[e-1],n+=$t[r>>10],n+=$t[r>>4&63],n+=$t[r<<2&63],n+="="),o.push(n),o.join("")}function sr(t,r,e,i,n){var o,s,a=8*n-i-1,h=(1<<a)-1,u=h>>1,f=-7,l=e?n-1:0,c=e?-1:1,p=t[r+l];for(l+=c,o=p&(1<<-f)-1,p>>=-f,f+=a;f>0;o=256*o+t[r+l],l+=c,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=i;f>0;s=256*s+t[r+l],l+=c,f-=8);if(0===o)o=1-u;else{if(o===h)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=u}return(p?-1:1)*s*Math.pow(2,o-i)}function ar(t,r,e,i,n,o){var s,a,h,u=8*o-n-1,f=(1<<u)-1,l=f>>1,c=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,m=i?1:-1,v=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(a=isNaN(r)?1:0,s=f):(s=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-s))<1&&(s--,h*=2),(r+=s+l>=1?c/h:c*Math.pow(2,1-l))*h>=2&&(s++,h/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(r*h-1)*Math.pow(2,n),s+=l):(a=r*Math.pow(2,l-1)*Math.pow(2,n),s=0));n>=8;t[e+p]=255&a,p+=m,a/=256,n-=8);for(s=s<<n|a,u+=n;u>0;t[e+p]=255&s,p+=m,s/=256,u-=8);t[e+p-m]|=128*v}var hr={}.toString,ur=Array.isArray||function(t){return"[object Array]"==hr.call(t)};pr.TYPED_ARRAY_SUPPORT=void 0===global.TYPED_ARRAY_SUPPORT||global.TYPED_ARRAY_SUPPORT;var fr=lr();function lr(){return pr.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function cr(t,r){if(lr()<r)throw new RangeError("Invalid typed array length");return pr.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=pr.prototype:(null===t&&(t=new pr(r)),t.length=r),t}function pr(t,r,e){if(!(pr.TYPED_ARRAY_SUPPORT||this instanceof pr))return new pr(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return dr(this,t)}return mr(this,t,r,e)}function mr(t,r,e,i){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?function(t,r,e,i){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(i||0))throw new RangeError("'length' is out of bounds");r=void 0===e&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,e):new Uint8Array(r,e,i);pr.TYPED_ARRAY_SUPPORT?(t=r).__proto__=pr.prototype:t=gr(t,r);return t}(t,r,e,i):"string"==typeof r?function(t,r,e){"string"==typeof e&&""!==e||(e="utf8");if(!pr.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var i=0|Mr(r,e),n=(t=cr(t,i)).write(r,e);n!==i&&(t=t.slice(0,n));return t}(t,r,e):function(t,r){if(wr(r)){var e=0|yr(r.length);return 0===(t=cr(t,e)).length||r.copy(t,0,0,e),t}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||(i=r.length)!=i?cr(t,0):gr(t,r);if("Buffer"===r.type&&ur(r.data))return gr(t,r.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,r)}function vr(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function dr(t,r){if(vr(r),t=cr(t,r<0?0:0|yr(r)),!pr.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function gr(t,r){var e=r.length<0?0:0|yr(r.length);t=cr(t,e);for(var i=0;i<e;i+=1)t[i]=255&r[i];return t}function yr(t){if(t>=lr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+lr().toString(16)+" bytes");return 0|t}function wr(t){return!(null==t||!t._isBuffer)}function Mr(t,r){if(wr(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return Vr(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return Zr(t).length;default:if(i)return Vr(t).length;r=(""+r).toLowerCase(),i=!0}}function br(t,r,e){var i=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return kr(this,r,e);case"utf8":case"utf-8":return Sr(this,r,e);case"ascii":return Cr(this,r,e);case"latin1":case"binary":return zr(this,r,e);case"base64":return Br(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Or(this,r,e);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function _r(t,r,e){var i=t[r];t[r]=t[e],t[e]=i}function xr(t,r,e,i,n){if(0===t.length)return-1;if("string"==typeof e?(i=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=n?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(n)return-1;e=t.length-1}else if(e<0){if(!n)return-1;e=0}if("string"==typeof r&&(r=pr.from(r,i)),wr(r))return 0===r.length?-1:Er(t,r,e,i,n);if("number"==typeof r)return r&=255,pr.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):Er(t,[r],e,i,n);throw new TypeError("val must be string, number or Buffer")}function Er(t,r,e,i,n){var o,s=1,a=t.length,h=r.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||r.length<2)return-1;s=2,a/=2,h/=2,e/=2}function u(t,r){return 1===s?t[r]:t.readUInt16BE(r*s)}if(n){var f=-1;for(o=e;o<a;o++)if(u(t,o)===u(r,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===h)return f*s}else-1!==f&&(o-=o-f),f=-1}else for(e+h>a&&(e=a-h),o=e;o>=0;o--){for(var l=!0,c=0;c<h;c++)if(u(t,o+c)!==u(r,c)){l=!1;break}if(l)return o}return-1}function Ar(t,r,e,i){e=Number(e)||0;var n=t.length-e;i?(i=Number(i))>n&&(i=n):i=n;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(r.substr(2*s,2),16);if(isNaN(a))return s;t[e+s]=a}return s}function Tr(t,r,e,i){return Wr(Vr(r,t.length-e),t,e,i)}function Rr(t,r,e,i){return Wr(function(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}(r),t,e,i)}function Ur(t,r,e,i){return Rr(t,r,e,i)}function Ir(t,r,e,i){return Wr(Zr(r),t,e,i)}function Pr(t,r,e,i){return Wr(function(t,r){for(var e,i,n,o=[],s=0;s<t.length&&!((r-=2)<0);++s)e=t.charCodeAt(s),i=e>>8,n=e%256,o.push(n),o.push(i);return o}(r,t.length-e),t,e,i)}function Br(t,r,e){return 0===r&&e===t.length?or(t):or(t.slice(r,e))}function Sr(t,r,e){e=Math.min(t.length,e);for(var i=[],n=r;n<e;){var o,s,a,h,u=t[n],f=null,l=u>239?4:u>223?3:u>191?2:1;if(n+l<=e)switch(l){case 1:u<128&&(f=u);break;case 2:128==(192&(o=t[n+1]))&&(h=(31&u)<<6|63&o)>127&&(f=h);break;case 3:o=t[n+1],s=t[n+2],128==(192&o)&&128==(192&s)&&(h=(15&u)<<12|(63&o)<<6|63&s)>2047&&(h<55296||h>57343)&&(f=h);break;case 4:o=t[n+1],s=t[n+2],a=t[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(h=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&h<1114112&&(f=h)}null===f?(f=65533,l=1):f>65535&&(f-=65536,i.push(f>>>10&1023|55296),f=56320|1023&f),i.push(f),n+=l}return function(t){var r=t.length;if(r<=4096)return String.fromCharCode.apply(String,t);var e="",i=0;for(;i<r;)e+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return e}(i)}pr.poolSize=8192,pr._augment=function(t){return t.__proto__=pr.prototype,t},pr.from=function(t,r,e){return mr(null,t,r,e)},pr.TYPED_ARRAY_SUPPORT&&(pr.prototype.__proto__=Uint8Array.prototype,pr.__proto__=Uint8Array),pr.alloc=function(t,r,e){return function(t,r,e,i){return vr(r),r<=0?cr(t,r):void 0!==e?"string"==typeof i?cr(t,r).fill(e,i):cr(t,r).fill(e):cr(t,r)}(null,t,r,e)},pr.allocUnsafe=function(t){return dr(null,t)},pr.allocUnsafeSlow=function(t){return dr(null,t)},pr.isBuffer=Hr,pr.compare=function(t,r){if(!wr(t)||!wr(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,i=r.length,n=0,o=Math.min(e,i);n<o;++n)if(t[n]!==r[n]){e=t[n],i=r[n];break}return e<i?-1:i<e?1:0},pr.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},pr.concat=function(t,r){if(!ur(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return pr.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=pr.allocUnsafe(r),n=0;for(e=0;e<t.length;++e){var o=t[e];if(!wr(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},pr.byteLength=Mr,pr.prototype._isBuffer=!0,pr.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)_r(this,r,r+1);return this},pr.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)_r(this,r,r+3),_r(this,r+1,r+2);return this},pr.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)_r(this,r,r+7),_r(this,r+1,r+6),_r(this,r+2,r+5),_r(this,r+3,r+4);return this},pr.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Sr(this,0,t):br.apply(this,arguments)},pr.prototype.equals=function(t){if(!wr(t))throw new TypeError("Argument must be a Buffer");return this===t||0===pr.compare(this,t)},pr.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},pr.prototype.compare=function(t,r,e,i,n){if(!wr(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),r<0||e>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&r>=e)return 0;if(i>=n)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(i>>>=0),s=(e>>>=0)-(r>>>=0),a=Math.min(o,s),h=this.slice(i,n),u=t.slice(r,e),f=0;f<a;++f)if(h[f]!==u[f]){o=h[f],s=u[f];break}return o<s?-1:s<o?1:0},pr.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},pr.prototype.indexOf=function(t,r,e){return xr(this,t,r,e,!0)},pr.prototype.lastIndexOf=function(t,r,e){return xr(this,t,r,e,!1)},pr.prototype.write=function(t,r,e,i){if(void 0===r)i="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)i=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===i&&(i="utf8")):(i=e,e=void 0)}var n=this.length-r;if((void 0===e||e>n)&&(e=n),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return Ar(this,t,r,e);case"utf8":case"utf-8":return Tr(this,t,r,e);case"ascii":return Rr(this,t,r,e);case"latin1":case"binary":return Ur(this,t,r,e);case"base64":return Ir(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pr(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},pr.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Cr(t,r,e){var i="";e=Math.min(t.length,e);for(var n=r;n<e;++n)i+=String.fromCharCode(127&t[n]);return i}function zr(t,r,e){var i="";e=Math.min(t.length,e);for(var n=r;n<e;++n)i+=String.fromCharCode(t[n]);return i}function kr(t,r,e){var i=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>i)&&(e=i);for(var n="",o=r;o<e;++o)n+=Gr(t[o]);return n}function Or(t,r,e){for(var i=t.slice(r,e),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function Nr(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function Lr(t,r,e,i,n,o){if(!wr(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>n||r<o)throw new RangeError('"value" argument is out of bounds');if(e+i>t.length)throw new RangeError("Index out of range")}function jr(t,r,e,i){r<0&&(r=65535+r+1);for(var n=0,o=Math.min(t.length-e,2);n<o;++n)t[e+n]=(r&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function Fr(t,r,e,i){r<0&&(r=4294967295+r+1);for(var n=0,o=Math.min(t.length-e,4);n<o;++n)t[e+n]=r>>>8*(i?n:3-n)&255}function Dr(t,r,e,i,n,o){if(e+i>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Yr(t,r,e,i,n){return n||Dr(t,0,e,4),ar(t,r,e,i,23,4),e+4}function qr(t,r,e,i,n){return n||Dr(t,0,e,8),ar(t,r,e,i,52,8),e+8}pr.prototype.slice=function(t,r){var e,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(r=void 0===r?i:~~r)<0?(r+=i)<0&&(r=0):r>i&&(r=i),r<t&&(r=t),pr.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=pr.prototype;else{var n=r-t;e=new pr(n,void 0);for(var o=0;o<n;++o)e[o]=this[o+t]}return e},pr.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||Nr(t,r,this.length);for(var i=this[t],n=1,o=0;++o<r&&(n*=256);)i+=this[t+o]*n;return i},pr.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||Nr(t,r,this.length);for(var i=this[t+--r],n=1;r>0&&(n*=256);)i+=this[t+--r]*n;return i},pr.prototype.readUInt8=function(t,r){return r||Nr(t,1,this.length),this[t]},pr.prototype.readUInt16LE=function(t,r){return r||Nr(t,2,this.length),this[t]|this[t+1]<<8},pr.prototype.readUInt16BE=function(t,r){return r||Nr(t,2,this.length),this[t]<<8|this[t+1]},pr.prototype.readUInt32LE=function(t,r){return r||Nr(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},pr.prototype.readUInt32BE=function(t,r){return r||Nr(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},pr.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||Nr(t,r,this.length);for(var i=this[t],n=1,o=0;++o<r&&(n*=256);)i+=this[t+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*r)),i},pr.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||Nr(t,r,this.length);for(var i=r,n=1,o=this[t+--i];i>0&&(n*=256);)o+=this[t+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*r)),o},pr.prototype.readInt8=function(t,r){return r||Nr(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},pr.prototype.readInt16LE=function(t,r){r||Nr(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},pr.prototype.readInt16BE=function(t,r){r||Nr(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},pr.prototype.readInt32LE=function(t,r){return r||Nr(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},pr.prototype.readInt32BE=function(t,r){return r||Nr(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},pr.prototype.readFloatLE=function(t,r){return r||Nr(t,4,this.length),sr(this,t,!0,23,4)},pr.prototype.readFloatBE=function(t,r){return r||Nr(t,4,this.length),sr(this,t,!1,23,4)},pr.prototype.readDoubleLE=function(t,r){return r||Nr(t,8,this.length),sr(this,t,!0,52,8)},pr.prototype.readDoubleBE=function(t,r){return r||Nr(t,8,this.length),sr(this,t,!1,52,8)},pr.prototype.writeUIntLE=function(t,r,e,i){(t=+t,r|=0,e|=0,i)||Lr(this,t,r,e,Math.pow(2,8*e)-1,0);var n=1,o=0;for(this[r]=255&t;++o<e&&(n*=256);)this[r+o]=t/n&255;return r+e},pr.prototype.writeUIntBE=function(t,r,e,i){(t=+t,r|=0,e|=0,i)||Lr(this,t,r,e,Math.pow(2,8*e)-1,0);var n=e-1,o=1;for(this[r+n]=255&t;--n>=0&&(o*=256);)this[r+n]=t/o&255;return r+e},pr.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||Lr(this,t,r,1,255,0),pr.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},pr.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||Lr(this,t,r,2,65535,0),pr.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):jr(this,t,r,!0),r+2},pr.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||Lr(this,t,r,2,65535,0),pr.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):jr(this,t,r,!1),r+2},pr.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||Lr(this,t,r,4,4294967295,0),pr.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):Fr(this,t,r,!0),r+4},pr.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||Lr(this,t,r,4,4294967295,0),pr.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):Fr(this,t,r,!1),r+4},pr.prototype.writeIntLE=function(t,r,e,i){if(t=+t,r|=0,!i){var n=Math.pow(2,8*e-1);Lr(this,t,r,e,n-1,-n)}var o=0,s=1,a=0;for(this[r]=255&t;++o<e&&(s*=256);)t<0&&0===a&&0!==this[r+o-1]&&(a=1),this[r+o]=(t/s>>0)-a&255;return r+e},pr.prototype.writeIntBE=function(t,r,e,i){if(t=+t,r|=0,!i){var n=Math.pow(2,8*e-1);Lr(this,t,r,e,n-1,-n)}var o=e-1,s=1,a=0;for(this[r+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[r+o+1]&&(a=1),this[r+o]=(t/s>>0)-a&255;return r+e},pr.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||Lr(this,t,r,1,127,-128),pr.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},pr.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||Lr(this,t,r,2,32767,-32768),pr.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):jr(this,t,r,!0),r+2},pr.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||Lr(this,t,r,2,32767,-32768),pr.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):jr(this,t,r,!1),r+2},pr.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||Lr(this,t,r,4,2147483647,-2147483648),pr.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):Fr(this,t,r,!0),r+4},pr.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||Lr(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),pr.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):Fr(this,t,r,!1),r+4},pr.prototype.writeFloatLE=function(t,r,e){return Yr(this,t,r,!0,e)},pr.prototype.writeFloatBE=function(t,r,e){return Yr(this,t,r,!1,e)},pr.prototype.writeDoubleLE=function(t,r,e){return qr(this,t,r,!0,e)},pr.prototype.writeDoubleBE=function(t,r,e){return qr(this,t,r,!1,e)},pr.prototype.copy=function(t,r,e,i){if(e||(e=0),i||0===i||(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<e&&(i=e),i===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-e&&(i=t.length-r+e);var n,o=i-e;if(this===t&&e<r&&r<i)for(n=o-1;n>=0;--n)t[n+r]=this[n+e];else if(o<1e3||!pr.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)t[n+r]=this[n+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},pr.prototype.fill=function(t,r,e,i){if("string"==typeof t){if("string"==typeof r?(i=r,r=0,e=this.length):"string"==typeof e&&(i=e,e=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!pr.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var s=wr(t)?t:Vr(new pr(t,i).toString()),a=s.length;for(o=0;o<e-r;++o)this[o+r]=s[o%a]}return this};var Xr=/[^+\/0-9A-Za-z-_]/g;function Gr(t){return t<16?"0"+t.toString(16):t.toString(16)}function Vr(t,r){var e;r=r||1/0;for(var i=t.length,n=null,o=[],s=0;s<i;++s){if((e=t.charCodeAt(s))>55295&&e<57344){if(!n){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(r-=3)>-1&&o.push(239,191,189);continue}n=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&(r-=3)>-1&&o.push(239,191,189);if(n=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function Zr(t){return function(t){var r,e,i,n,o,s;er||ir();var a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[a-2]?2:"="===t[a-1]?1:0,s=new rr(3*a/4-o),i=o>0?a-4:a;var h=0;for(r=0,e=0;r<i;r+=4,e+=3)n=tr[t.charCodeAt(r)]<<18|tr[t.charCodeAt(r+1)]<<12|tr[t.charCodeAt(r+2)]<<6|tr[t.charCodeAt(r+3)],s[h++]=n>>16&255,s[h++]=n>>8&255,s[h++]=255&n;return 2===o?(n=tr[t.charCodeAt(r)]<<2|tr[t.charCodeAt(r+1)]>>4,s[h++]=255&n):1===o&&(n=tr[t.charCodeAt(r)]<<10|tr[t.charCodeAt(r+1)]<<4|tr[t.charCodeAt(r+2)]>>2,s[h++]=n>>8&255,s[h++]=255&n),s}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Xr,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Wr(t,r,e,i){for(var n=0;n<i&&!(n+e>=r.length||n>=t.length);++n)r[n+e]=t[n];return n}function Hr(t){return null!=t&&(!!t._isBuffer||Qr(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Qr(t.slice(0,0))}(t))}function Qr(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Kr=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:fr,Buffer:pr,SlowBuffer:function(t){return+t!=t&&(t=0),pr.alloc(+t)},isBuffer:Hr}),Jr=dt((function(t,r){var e=Kr.Buffer;vt.__TYPEDARRAY_POOL||(vt.__TYPEDARRAY_POOL={UINT8:Jt([32,0]),UINT16:Jt([32,0]),UINT32:Jt([32,0]),BIGUINT64:Jt([32,0]),INT8:Jt([32,0]),INT16:Jt([32,0]),INT32:Jt([32,0]),BIGINT64:Jt([32,0]),FLOAT:Jt([32,0]),DOUBLE:Jt([32,0]),DATA:Jt([32,0]),UINT8C:Jt([32,0]),BUFFER:Jt([32,0])});var i="undefined"!=typeof Uint8ClampedArray,n="undefined"!=typeof BigUint64Array,o="undefined"!=typeof BigInt64Array,s=vt.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=Jt([32,0])),s.BIGUINT64||(s.BIGUINT64=Jt([32,0])),s.BIGINT64||(s.BIGINT64=Jt([32,0])),s.BUFFER||(s.BUFFER=Jt([32,0]));var a=s.DATA,h=s.BUFFER;function u(t){if(t){var r=t.length||t.byteLength,e=Kt.log2(r);a[e].push(t)}}function f(t){t=Kt.nextPow2(t);var r=Kt.log2(t),e=a[r];return e.length>0?e.pop():new ArrayBuffer(t)}function l(t){return new Uint8Array(f(t),0,t)}function c(t){return new Uint16Array(f(2*t),0,t)}function p(t){return new Uint32Array(f(4*t),0,t)}function m(t){return new Int8Array(f(t),0,t)}function v(t){return new Int16Array(f(2*t),0,t)}function d(t){return new Int32Array(f(4*t),0,t)}function g(t){return new Float32Array(f(4*t),0,t)}function y(t){return new Float64Array(f(8*t),0,t)}function w(t){return i?new Uint8ClampedArray(f(t),0,t):l(t)}function M(t){return n?new BigUint64Array(f(8*t),0,t):null}function b(t){return o?new BigInt64Array(f(8*t),0,t):null}function _(t){return new DataView(f(t),0,t)}function x(t){t=Kt.nextPow2(t);var r=Kt.log2(t),i=h[r];return i.length>0?i.pop():new e(t)}r.free=function(t){if(e.isBuffer(t))h[Kt.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var r=t.length||t.byteLength,i=0|Kt.log2(r);a[i].push(t)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeBigUint64=r.freeInt8=r.freeInt16=r.freeInt32=r.freeBigInt64=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=function(t){u(t.buffer)},r.freeArrayBuffer=u,r.freeBuffer=function(t){h[Kt.log2(t.length)].push(t)},r.malloc=function(t,r){if(void 0===r||"arraybuffer"===r)return f(t);switch(r){case"uint8":return l(t);case"uint16":return c(t);case"uint32":return p(t);case"int8":return m(t);case"int16":return v(t);case"int32":return d(t);case"float":case"float32":return g(t);case"double":case"float64":return y(t);case"uint8_clamped":return w(t);case"bigint64":return b(t);case"biguint64":return M(t);case"buffer":return x(t);case"data":case"dataview":return _(t);default:return null}return null},r.mallocArrayBuffer=f,r.mallocUint8=l,r.mallocUint16=c,r.mallocUint32=p,r.mallocInt8=m,r.mallocInt16=v,r.mallocInt32=d,r.mallocFloat32=r.mallocFloat=g,r.mallocFloat64=r.mallocDouble=y,r.mallocUint8Clamped=w,r.mallocBigUint64=M,r.mallocBigInt64=b,r.mallocDataView=_,r.mallocBuffer=x,r.clearCache=function(){for(var t=0;t<32;++t)s.UINT8[t].length=0,s.UINT16[t].length=0,s.UINT32[t].length=0,s.INT8[t].length=0,s.INT16[t].length=0,s.INT32[t].length=0,s.FLOAT[t].length=0,s.DOUBLE[t].length=0,s.BIGUINT64[t].length=0,s.BIGINT64[t].length=0,s.UINT8C[t].length=0,a[t].length=0,h[t].length=0}})),$r=(Jr.free,Jr.freeUint8,Jr.freeUint16,Jr.freeUint32,Jr.freeBigUint64,Jr.freeInt8,Jr.freeInt16,Jr.freeInt32,Jr.freeBigInt64,Jr.freeFloat32,Jr.freeFloat,Jr.freeFloat64,Jr.freeDouble,Jr.freeUint8Clamped,Jr.freeDataView,Jr.freeArrayBuffer,Jr.freeBuffer,Jr.malloc,Jr.mallocArrayBuffer,Jr.mallocUint8,Jr.mallocUint16,Jr.mallocUint32,Jr.mallocInt8,Jr.mallocInt16,Jr.mallocInt32,Jr.mallocFloat32,Jr.mallocFloat,Jr.mallocFloat64,Jr.mallocDouble,Jr.mallocUint8Clamped,Jr.mallocBigUint64,Jr.mallocBigInt64,Jr.mallocDataView,Jr.mallocBuffer,Jr.clearCache,function(t,r){r<=128?te(0,r-1,t):function t(r,e,i){var n=(e-r+1)/6|0,o=r+n,s=e-n,a=r+e>>1,h=a-n,u=a+n,f=o,l=h,c=a,p=u,m=s,v=r+1,d=e-1,g=0;oe(f,l,i)&&(g=f,f=l,l=g);oe(p,m,i)&&(g=p,p=m,m=g);oe(f,c,i)&&(g=f,f=c,c=g);oe(l,c,i)&&(g=l,l=c,c=g);oe(f,p,i)&&(g=f,f=p,p=g);oe(c,p,i)&&(g=c,c=p,p=g);oe(l,m,i)&&(g=l,l=m,m=g);oe(l,c,i)&&(g=l,l=c,c=g);oe(p,m,i)&&(g=p,p=m,m=g);for(var y=i[2*l],w=i[2*l+1],M=i[2*p],b=i[2*p+1],_=2*f,x=2*c,E=2*m,A=2*o,T=2*a,R=2*s,U=0;U<2;++U){var I=i[_+U],P=i[x+U],B=i[E+U];i[A+U]=I,i[T+U]=P,i[R+U]=B}ee(h,r,i),ee(u,e,i);for(var S=v;S<=d;++S)if(se(S,y,w,i))S!==v&&re(S,v,i),++v;else if(!se(S,M,b,i))for(;;){if(se(d,M,b,i)){se(d,y,w,i)?(ie(S,v,d,i),++v,--d):(re(S,d,i),--d);break}if(--d<S)break}ne(r,v-1,y,w,i),ne(e,d+1,M,b,i),v-2-r<=32?te(r,v-2,i):t(r,v-2,i);e-(d+2)<=32?te(d+2,e,i):t(d+2,e,i);d-v<=32?te(v,d,i):t(v,d,i)}(0,r-1,t)});function te(t,r,e){for(var i=2*(t+1),n=t+1;n<=r;++n){for(var o=e[i++],s=e[i++],a=n,h=i-2;a-- >t;){var u=e[h-2],f=e[h-1];if(u<o)break;if(u===o&&f<s)break;e[h]=u,e[h+1]=f,h-=2}e[h]=o,e[h+1]=s}}function re(t,r,e){r*=2;var i=e[t*=2],n=e[t+1];e[t]=e[r],e[t+1]=e[r+1],e[r]=i,e[r+1]=n}function ee(t,r,e){r*=2,e[t*=2]=e[r],e[t+1]=e[r+1]}function ie(t,r,e,i){r*=2,e*=2;var n=i[t*=2],o=i[t+1];i[t]=i[r],i[t+1]=i[r+1],i[r]=i[e],i[r+1]=i[e+1],i[e]=n,i[e+1]=o}function ne(t,r,e,i,n){r*=2,n[t*=2]=n[r],n[r]=e,n[t+1]=n[r+1],n[r+1]=i}function oe(t,r,e){r*=2;var i=e[t*=2],n=e[r];return!(i<n)&&(i!==n||e[t+1]>e[r+1])}function se(t,r,e,i){var n=i[t*=2];return n<r||n===r&&i[t+1]<e}var ae={init:function(t){var r=Kt.nextPow2(t);he.length<r&&(Jr.free(he),he=Jr.mallocInt32(r));ue.length<r&&(Jr.free(ue),ue=Jr.mallocInt32(r));fe.length<r&&(Jr.free(fe),fe=Jr.mallocInt32(r));le.length<r&&(Jr.free(le),le=Jr.mallocInt32(r));ce.length<r&&(Jr.free(ce),ce=Jr.mallocInt32(r));pe.length<r&&(Jr.free(pe),pe=Jr.mallocInt32(r));var e=8*r;me.length<e&&(Jr.free(me),me=Jr.mallocDouble(e))},sweepBipartite:function(t,r,e,i,n,o,s,a,h,u){for(var f=0,l=2*t,c=t-1,p=l-1,m=e;m<i;++m){var v=o[m],d=l*m;me[f++]=n[d+c],me[f++]=-(v+1),me[f++]=n[d+p],me[f++]=v}for(m=s;m<a;++m){v=u[m]+(1<<28);var g=l*m;me[f++]=h[g+c],me[f++]=-v,me[f++]=h[g+p],me[f++]=v}var y=f>>>1;$r(me,y);var w=0,M=0;for(m=0;m<y;++m){var b=0|me[2*m+1];if(b>=1<<28)ve(fe,le,M--,b=b-(1<<28)|0);else if(b>=0)ve(he,ue,w--,b);else if(b<=-(1<<28)){b=-b-(1<<28)|0;for(var _=0;_<w;++_){if(void 0!==(x=r(he[_],b)))return x}de(fe,le,M++,b)}else{b=-b-1|0;for(_=0;_<M;++_){var x;if(void 0!==(x=r(b,fe[_])))return x}de(he,ue,w++,b)}}},sweepComplete:function(t,r,e,i,n,o,s,a,h,u){for(var f=0,l=2*t,c=t-1,p=l-1,m=e;m<i;++m){var v=o[m]+1<<1,d=l*m;me[f++]=n[d+c],me[f++]=-v,me[f++]=n[d+p],me[f++]=v}for(m=s;m<a;++m){v=u[m]+1<<1;var g=l*m;me[f++]=h[g+c],me[f++]=1|-v,me[f++]=h[g+p],me[f++]=1|v}var y=f>>>1;$r(me,y);var w=0,M=0,b=0;for(m=0;m<y;++m){var _=0|me[2*m+1],x=1&_;if(m<y-1&&_>>1==me[2*m+3]>>1&&(x=2,m+=1),_<0){for(var E=-(_>>1)-1,A=0;A<b;++A){if(void 0!==(T=r(ce[A],E)))return T}if(0!==x)for(A=0;A<w;++A){if(void 0!==(T=r(he[A],E)))return T}if(1!==x)for(A=0;A<M;++A){var T;if(void 0!==(T=r(fe[A],E)))return T}0===x?de(he,ue,w++,E):1===x?de(fe,le,M++,E):2===x&&de(ce,pe,b++,E)}else{E=(_>>1)-1;0===x?ve(he,ue,w--,E):1===x?ve(fe,le,M--,E):2===x&&ve(ce,pe,b--,E)}}},scanBipartite:function(t,r,e,i,n,o,s,a,h,u,f,l){var c=0,p=2*t,m=r,v=r+t,d=1,g=1;i?g=1<<28:d=1<<28;for(var y=n;y<o;++y){var w=y+d,M=p*y;me[c++]=s[M+m],me[c++]=-w,me[c++]=s[M+v],me[c++]=w}for(y=h;y<u;++y){w=y+g;var b=p*y;me[c++]=f[b+m],me[c++]=-w}var _=c>>>1;$r(me,_);var x=0;for(y=0;y<_;++y){var E=0|me[2*y+1];if(E<0){var A=!1;if((w=-E)>=1<<28?(A=!i,w-=1<<28):(A=!!i,w-=1),A)de(he,ue,x++,w);else{var T=l[w],R=p*w,U=f[R+r+1],I=f[R+r+1+t];t:for(var P=0;P<x;++P){var B=he[P],S=p*B;if(!(I<s[S+r+1]||s[S+r+1+t]<U)){for(var C=r+2;C<t;++C)if(f[R+C+t]<s[S+C]||s[S+C+t]<f[R+C])continue t;var z,k=a[B];if(void 0!==(z=i?e(T,k):e(k,T)))return z}}}}else ve(he,ue,x--,E-d)}},scanComplete:function(t,r,e,i,n,o,s,a,h,u,f){for(var l=0,c=2*t,p=r,m=r+t,v=i;v<n;++v){var d=v+(1<<28),g=c*v;me[l++]=o[g+p],me[l++]=-d,me[l++]=o[g+m],me[l++]=d}for(v=a;v<h;++v){d=v+1;var y=c*v;me[l++]=u[y+p],me[l++]=-d}var w=l>>>1;$r(me,w);var M=0;for(v=0;v<w;++v){var b=0|me[2*v+1];if(b<0){if((d=-b)>=1<<28)he[M++]=d-(1<<28);else{var _=f[d-=1],x=c*d,E=u[x+r+1],A=u[x+r+1+t];t:for(var T=0;T<M;++T){var R=he[T],U=s[R];if(U===_)break;var I=c*R;if(!(A<o[I+r+1]||o[I+r+1+t]<E)){for(var P=r+2;P<t;++P)if(u[x+P+t]<o[I+P]||o[I+P+t]<u[x+P])continue t;var B=e(U,_);if(void 0!==B)return B}}}}else{for(d=b-(1<<28),T=M-1;T>=0;--T)if(he[T]===d){for(P=T+1;P<M;++P)he[P-1]=he[P];break}--M}}}},he=Jr.mallocInt32(1024),ue=Jr.mallocInt32(1024),fe=Jr.mallocInt32(1024),le=Jr.mallocInt32(1024),ce=Jr.mallocInt32(1024),pe=Jr.mallocInt32(1024),me=Jr.mallocDouble(8192);function ve(t,r,e,i){var n=r[i],o=t[e-1];t[n]=o,r[o]=n}function de(t,r,e,i){t[e]=i,r[i]=e}var ge=["d","ax","vv","rs","re","rb","ri","bs","be","bb","bi"];function ye(t){var r="bruteForce"+(t?"Full":"Partial"),e=[],i=ge.slice();t||i.splice(3,0,"fp");var n=["function "+r+"("+i.join()+"){"];function o(r,i){var o=function(t,r,e){var i="bruteForce"+(t?"Red":"Blue")+(r?"Flip":"")+(e?"Full":""),n=["function ",i,"(",ge.join(),"){","var ","es","=2*","d",";"],o="for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];",s="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(e?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";return t?n.push(o,"Q",":",s):n.push(s,"Q",":",o),e?n.push("if(y1<x0||x1<y0)continue;"):r?n.push("if(y0<=x0||x1<y0)continue;"):n.push("if(y0<x0||x1<y0)continue;"),n.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv("),r?n.push("yi,xi"):n.push("xi,yi"),n.push(");if(rv!==void 0)return rv;}}}"),{name:i,code:n.join("")}}(r,i,t);e.push(o.code),n.push("return "+o.name+"("+ge.join()+");")}n.push("if(re-rs>be-bs){"),t?(o(!0,!1),n.push("}else{"),o(!1,!1)):(n.push("if(fp){"),o(!0,!0),n.push("}else{"),o(!0,!1),n.push("}}else{if(fp){"),o(!1,!0),n.push("}else{"),o(!1,!1),n.push("}")),n.push("}}return "+r);var s=e.join("")+n.join("");return new Function(s)()}var we={partial:ye(!1),full:ye(!0)},Me=function(t,r){var e="abcdef".split("").concat(r),i=[];t.indexOf("lo")>=0&&i.push("lo=e[k+n]");t.indexOf("hi")>=0&&i.push("hi=e[k+o]");return e.push("for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m".replace("_",i.join()).replace("$",t)),Function.apply(void 0,e)};var be=function(t,r,e,i,n,o){if(i<=e+1)return e;var s=e,a=i,h=i+e>>>1,u=2*t,f=h,l=n[u*h+r];for(;s<a;){if(a-s<8){xe(t,r,s,a,n,o),l=n[u*h+r];break}var c=a-s,p=Math.random()*c+s|0,m=n[u*p+r],v=Math.random()*c+s|0,d=n[u*v+r],g=Math.random()*c+s|0,y=n[u*g+r];m<=d?y>=d?(f=v,l=d):m>=y?(f=p,l=m):(f=g,l=y):d>=y?(f=v,l=d):y>=m?(f=p,l=m):(f=g,l=y);for(var w=u*(a-1),M=u*f,b=0;b<u;++b,++w,++M){var _=n[w];n[w]=n[M],n[M]=_}var x=o[a-1];o[a-1]=o[f],o[f]=x,f=_e(t,r,s,a-1,n,o,l);for(w=u*(a-1),M=u*f,b=0;b<u;++b,++w,++M){_=n[w];n[w]=n[M],n[M]=_}x=o[a-1];if(o[a-1]=o[f],o[f]=x,h<f){for(a=f-1;s<a&&n[u*(a-1)+r]===l;)a-=1;a+=1}else{if(!(f<h))break;for(s=f+1;s<a&&n[u*s+r]===l;)s+=1}}return _e(t,r,e,h,n,o,n[u*h+r])},_e=Me("lo<p0",["p0"]);function xe(t,r,e,i,n,o){for(var s=2*t,a=s*(e+1)+r,h=e+1;h<i;++h,a+=s)for(var u=n[a],f=h,l=s*(h-1);f>e&&n[l+r]>u;--f,l-=s){for(var c=l,p=l+s,m=0;m<s;++m,++c,++p){var v=n[c];n[c]=n[p],n[p]=v}var d=o[f];o[f]=o[f-1],o[f-1]=d}}var Ee=function(t,r,e,i,n,o,s,a,h){!function(t,r){var e=8*Kt.log2(r+1)*(t+1)|0,i=Kt.nextPow2(6*e);Ce.length<i&&(Jr.free(Ce),Ce=Jr.mallocInt32(i));var n=Kt.nextPow2(2*e);ze.length<n&&(Jr.free(ze),ze=Jr.mallocDouble(n))}(t,i+s);var u,f=0,l=2*t;ke(f++,0,0,i,0,s,e?16:0,-1/0,1/0),e||ke(f++,0,0,s,0,i,1,-1/0,1/0);for(;f>0;){var c=6*(f-=1),p=Ce[c],m=Ce[c+1],v=Ce[c+2],d=Ce[c+3],g=Ce[c+4],y=Ce[c+5],w=2*f,M=ze[w],b=ze[w+1],_=1&y,x=!!(16&y),E=n,A=o,T=a,R=h;if(_&&(E=a,A=h,T=n,R=o),!(2&y&&(v=Ie(t,p,m,v,E,A,b),m>=v)||4&y&&(m=Pe(t,p,m,v,E,A,M))>=v)){var U=v-m,I=g-d;if(x){if(t*U*(U+I)<1<<22){if(void 0!==(u=ae.scanComplete(t,p,r,m,v,E,A,d,g,T,R)))return u;continue}}else{if(t*Math.min(U,I)<128){if(void 0!==(u=Ae(t,p,r,_,m,v,E,A,d,g,T,R)))return u;continue}if(t*U*I<1<<22){if(void 0!==(u=ae.scanBipartite(t,p,r,_,m,v,E,A,d,g,T,R)))return u;continue}}var P=Re(t,p,m,v,E,A,M,b);if(m<P)if(t*(P-m)<128){if(void 0!==(u=Te(t,p+1,r,m,P,E,A,d,g,T,R)))return u}else if(p===t-2){if(void 0!==(u=_?ae.sweepBipartite(t,r,d,g,T,R,m,P,E,A):ae.sweepBipartite(t,r,m,P,E,A,d,g,T,R)))return u}else ke(f++,p+1,m,P,d,g,_,-1/0,1/0),ke(f++,p+1,d,g,m,P,1^_,-1/0,1/0);if(P<v){var B=be(t,p,d,g,T,R),S=T[l*B+p],C=Ue(t,p,B,g,T,R,S);if(C<g&&ke(f++,p,P,v,C,g,(4|_)+(x?16:0),S,b),d<B&&ke(f++,p,P,v,d,B,(2|_)+(x?16:0),M,S),B+1===C){if(void 0!==(u=x?Ne(t,p,r,P,v,E,A,B,T,R[B]):Oe(t,p,r,_,P,v,E,A,B,T,R[B])))return u}else if(B<C){var z;if(x){if(z=Be(t,p,P,v,E,A,S),P<z){var k=Ue(t,p,P,z,E,A,S);if(p===t-2){if(P<k&&void 0!==(u=ae.sweepComplete(t,r,P,k,E,A,B,C,T,R)))return u;if(k<z&&void 0!==(u=ae.sweepBipartite(t,r,k,z,E,A,B,C,T,R)))return u}else P<k&&ke(f++,p+1,P,k,B,C,16,-1/0,1/0),k<z&&(ke(f++,p+1,k,z,B,C,0,-1/0,1/0),ke(f++,p+1,B,C,k,z,1,-1/0,1/0))}}else z=_?Se(t,p,P,v,E,A,S):Be(t,p,P,v,E,A,S),P<z&&(p===t-2?u=_?ae.sweepBipartite(t,r,B,C,T,R,P,z,E,A):ae.sweepBipartite(t,r,P,z,E,A,B,C,T,R):(ke(f++,p+1,P,z,B,C,_,-1/0,1/0),ke(f++,p+1,B,C,P,z,1^_,-1/0,1/0)))}}}}},Ae=we.partial,Te=we.full,Re=Me("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),Ue=Me("lo===p0",["p0"]),Ie=Me("lo<p0",["p0"]),Pe=Me("hi<=p0",["p0"]),Be=Me("lo<=p0&&p0<=hi",["p0"]),Se=Me("lo<p0&&p0<=hi",["p0"]),Ce=Jr.mallocInt32(1024),ze=Jr.mallocDouble(1024);function ke(t,r,e,i,n,o,s,a,h){var u=6*t;Ce[u]=r,Ce[u+1]=e,Ce[u+2]=i,Ce[u+3]=n,Ce[u+4]=o,Ce[u+5]=s;var f=2*t;ze[f]=a,ze[f+1]=h}function Oe(t,r,e,i,n,o,s,a,h,u,f){var l=2*t,c=h*l,p=u[c+r];t:for(var m=n,v=n*l;m<o;++m,v+=l){var d=s[v+r],g=s[v+r+t];if(!(p<d||g<p)&&(!i||p!==d)){for(var y,w=a[m],M=r+1;M<t;++M){d=s[v+M],g=s[v+M+t];var b=u[c+M],_=u[c+M+t];if(g<b||_<d)continue t}if(void 0!==(y=i?e(f,w):e(w,f)))return y}}}function Ne(t,r,e,i,n,o,s,a,h,u){var f=2*t,l=a*f,c=h[l+r];t:for(var p=i,m=i*f;p<n;++p,m+=f){var v=s[p];if(v!==u){var d=o[m+r],g=o[m+r+t];if(!(c<d||g<c)){for(var y=r+1;y<t;++y){d=o[m+y],g=o[m+y+t];var w=h[l+y],M=h[l+y+t];if(g<w||M<d)continue t}var b=e(v,u);if(void 0!==b)return b}}}}var Le,je=function(t,r,e){switch(arguments.length){case 1:return Xe(t);case 2:return"function"==typeof r?Ye(t,t,r,!0):Ge(t,r);case 3:return Ye(t,r,e,!1);default:throw new Error("box-intersect: Invalid arguments")}};function Fe(t,r){for(var e=0;e<t;++e)if(!(r[e]<=r[e+t]))return!0;return!1}function De(t,r,e,i){for(var n=0,o=0,s=0,a=t.length;s<a;++s){var h=t[s];if(!Fe(r,h)){for(var u=0;u<2*r;++u)e[n++]=h[u];i[o++]=s}}return o}function Ye(t,r,e,i){var n=t.length,o=r.length;if(!(n<=0||o<=0)){var s=t[0].length>>>1;if(!(s<=0)){var a,h=Jr.mallocDouble(2*s*n),u=Jr.mallocInt32(n);if((n=De(t,s,h,u))>0){if(1===s&&i)ae.init(n),a=ae.sweepComplete(s,e,0,n,h,u,0,n,h,u);else{var f=Jr.mallocDouble(2*s*o),l=Jr.mallocInt32(o);(o=De(r,s,f,l))>0&&(ae.init(n+o),a=1===s?ae.sweepBipartite(s,e,0,n,h,u,0,o,f,l):Ee(s,e,i,n,h,u,o,f,l),Jr.free(f),Jr.free(l))}Jr.free(h),Jr.free(u)}return a}}}function qe(t,r){Le.push([t,r])}function Xe(t){return Le=[],Ye(t,t,qe,!0),Le}function Ge(t,r){return Le=[],Ye(t,r,qe,!1),Le}var Ve=function(t,r,e,i){var n=Ze(t,e,i),o=Ze(r,e,i);if(n>0&&o>0||n<0&&o<0)return!1;var s=Ze(e,t,r),a=Ze(i,t,r);if(s>0&&a>0||s<0&&a<0)return!1;if(0===n&&0===o&&0===s&&0===a)return function(t,r,e,i){for(var n=0;n<2;++n){var o=t[n],s=r[n],a=Math.min(o,s),h=Math.max(o,s),u=e[n],f=i[n],l=Math.min(u,f);if(Math.max(u,f)<a||h<l)return!1}return!0}(t,r,e,i);return!0},Ze=xt[3];var We=dt((function(t){!function(t,r){function e(t,r){if(!t)throw new Error(r||"Assertion failed")}function i(t,r){t.super_=r;var e=function(){};e.prototype=r.prototype,t.prototype=new e,t.prototype.constructor=t}function n(t,r,e){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==r&&"be"!==r||(e=r,r=10),this._init(t||0,r||10,e||"be"))}var o;"object"==typeof t?t.exports=n:r.BN=n,n.BN=n,n.wordSize=26;try{o=Kr.Buffer}catch(t){}function s(t,r,e){for(var i=0,n=Math.min(t.length,e),o=r;o<n;o++){var s=t.charCodeAt(o)-48;i<<=4,i|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return i}function a(t,r,e,i){for(var n=0,o=Math.min(t.length,e),s=r;s<o;s++){var a=t.charCodeAt(s)-48;n*=i,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,r){return t.cmp(r)>0?t:r},n.min=function(t,r){return t.cmp(r)<0?t:r},n.prototype._init=function(t,r,i){if("number"==typeof t)return this._initNumber(t,r,i);if("object"==typeof t)return this._initArray(t,r,i);"hex"===r&&(r=16),e(r===(0|r)&&r>=2&&r<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&n++,16===r?this._parseHex(t,n):this._parseBase(t,r,n),"-"===t[0]&&(this.negative=1),this.strip(),"le"===i&&this._initArray(this.toArray(),r,i)},n.prototype._initNumber=function(t,r,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(e(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),r,i)},n.prototype._initArray=function(t,r,i){if(e("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,a=0;if("be"===i)for(n=t.length-1,o=0;n>=0;n-=3)s=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===i)for(n=0,o=0;n<t.length;n+=3)s=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},n.prototype._parseHex=function(t,r){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var i,n,o=0;for(e=t.length-6,i=0;e>=r;e-=6)n=s(t,e,e+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,i++);e+6!==r&&(n=s(t,r,e+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303),this.strip()},n.prototype._parseBase=function(t,r,e){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=r)i++;i--,n=n/r|0;for(var o=t.length-e,s=o%i,h=Math.min(o,o-s)+e,u=0,f=e;f<h;f+=i)u=a(t,f,f+i,r),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=a(t,f,t.length,r),f=0;f<s;f++)l*=r;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},n.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(t,r,e){e.negative=r.negative^t.negative;var i=t.length+r.length|0;e.length=i,i=i-1|0;var n=0|t.words[0],o=0|r.words[0],s=n*o,a=67108863&s,h=s/67108864|0;e.words[0]=a;for(var u=1;u<i;u++){for(var f=h>>>26,l=67108863&h,c=Math.min(u,r.length-1),p=Math.max(0,u-t.length+1);p<=c;p++){var m=u-p|0;f+=(s=(n=0|t.words[m])*(o=0|r.words[p])+l)/67108864|0,l=67108863&s}e.words[u]=0|l,h=0|f}return 0!==h?e.words[u]=0|h:e.length--,e.strip()}n.prototype.toString=function(t,r){var i;if(r=0|r||1,16===(t=t||10)||"hex"===t){i="";for(var n=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<n|o)).toString(16);i=0!==(o=a>>>24-n&16777215)||s!==this.length-1?h[6-l.length]+l+i:l+i,(n+=2)>=26&&(n-=26,s--)}for(0!==o&&(i=o.toString(16)+i);i.length%r!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var c=u[t],p=f[t];i="";var m=this.clone();for(m.negative=0;!m.isZero();){var v=m.modn(p).toString(t);i=(m=m.idivn(p)).isZero()?v+i:h[c-v.length]+v+i}for(this.isZero()&&(i="0"+i);i.length%r!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}e(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,r){return e(void 0!==o),this.toArrayLike(o,t,r)},n.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},n.prototype.toArrayLike=function(t,r,i){var n=this.byteLength(),o=i||Math.max(1,n);e(n<=o,"byte array longer than desired length"),e(o>0,"Requested array length <= 0"),this.strip();var s,a,h="le"===r,u=new t(o),f=this.clone();if(h){for(a=0;!f.isZero();a++)s=f.andln(255),f.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-n;a++)u[a]=0;for(a=0;!f.isZero();a++)s=f.andln(255),f.iushrn(8),u[o-a-1]=s}return u},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var r=t,e=0;return r>=4096&&(e+=13,r>>>=13),r>=64&&(e+=7,r>>>=7),r>=8&&(e+=4,r>>>=4),r>=2&&(e+=2,r>>>=2),e+r},n.prototype._zeroBits=function(t){if(0===t)return 26;var r=t,e=0;return 0==(8191&r)&&(e+=13,r>>>=13),0==(127&r)&&(e+=7,r>>>=7),0==(15&r)&&(e+=4,r>>>=4),0==(3&r)&&(e+=2,r>>>=2),0==(1&r)&&e++,e},n.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return 26*(this.length-1)+r},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var e=this._zeroBits(this.words[r]);if(t+=e,26!==e)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},n.prototype.ior=function(t){return e(0==(this.negative|t.negative)),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var r;r=this.length>t.length?t:this;for(var e=0;e<r.length;e++)this.words[e]=this.words[e]&t.words[e];return this.length=r.length,this.strip()},n.prototype.iand=function(t){return e(0==(this.negative|t.negative)),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var r,e;this.length>t.length?(r=this,e=t):(r=t,e=this);for(var i=0;i<e.length;i++)this.words[i]=r.words[i]^e.words[i];if(this!==r)for(;i<r.length;i++)this.words[i]=r.words[i];return this.length=r.length,this.strip()},n.prototype.ixor=function(t){return e(0==(this.negative|t.negative)),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){e("number"==typeof t&&t>=0);var r=0|Math.ceil(t/26),i=t%26;this._expand(r),i>0&&r--;for(var n=0;n<r;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,r){e("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=r?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},n.prototype.iadd=function(t){var r,e,i;if(0!==this.negative&&0===t.negative)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();this.length>t.length?(e=this,i=t):(e=t,i=this);for(var n=0,o=0;o<i.length;o++)r=(0|e.words[o])+(0|i.words[o])+n,this.words[o]=67108863&r,n=r>>>26;for(;0!==n&&o<e.length;o++)r=(0|e.words[o])+n,this.words[o]=67108863&r,n=r>>>26;if(this.length=e.length,0!==n)this.words[this.length]=n,this.length++;else if(e!==this)for(;o<e.length;o++)this.words[o]=e.words[o];return this},n.prototype.add=function(t){var r;return 0!==t.negative&&0===this.negative?(t.negative=0,r=this.sub(t),t.negative^=1,r):0===t.negative&&0!==this.negative?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var e,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(e=this,i=t):(e=t,i=this);for(var o=0,s=0;s<i.length;s++)o=(r=(0|e.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&r;for(;0!==o&&s<e.length;s++)o=(r=(0|e.words[s])+o)>>26,this.words[s]=67108863&r;if(0===o&&s<e.length&&e!==this)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=Math.max(this.length,s),e!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var c=function(t,r,e){var i,n,o,s=t.words,a=r.words,h=e.words,u=0,f=0|s[0],l=8191&f,c=f>>>13,p=0|s[1],m=8191&p,v=p>>>13,d=0|s[2],g=8191&d,y=d>>>13,w=0|s[3],M=8191&w,b=w>>>13,_=0|s[4],x=8191&_,E=_>>>13,A=0|s[5],T=8191&A,R=A>>>13,U=0|s[6],I=8191&U,P=U>>>13,B=0|s[7],S=8191&B,C=B>>>13,z=0|s[8],k=8191&z,O=z>>>13,N=0|s[9],L=8191&N,j=N>>>13,F=0|a[0],D=8191&F,Y=F>>>13,q=0|a[1],X=8191&q,G=q>>>13,V=0|a[2],Z=8191&V,W=V>>>13,H=0|a[3],Q=8191&H,K=H>>>13,J=0|a[4],$=8191&J,tt=J>>>13,rt=0|a[5],et=8191&rt,it=rt>>>13,nt=0|a[6],ot=8191&nt,st=nt>>>13,at=0|a[7],ht=8191&at,ut=at>>>13,ft=0|a[8],lt=8191&ft,ct=ft>>>13,pt=0|a[9],mt=8191&pt,vt=pt>>>13;e.negative=t.negative^r.negative,e.length=19;var dt=(u+(i=Math.imul(l,D))|0)+((8191&(n=(n=Math.imul(l,Y))+Math.imul(c,D)|0))<<13)|0;u=((o=Math.imul(c,Y))+(n>>>13)|0)+(dt>>>26)|0,dt&=67108863,i=Math.imul(m,D),n=(n=Math.imul(m,Y))+Math.imul(v,D)|0,o=Math.imul(v,Y);var gt=(u+(i=i+Math.imul(l,X)|0)|0)+((8191&(n=(n=n+Math.imul(l,G)|0)+Math.imul(c,X)|0))<<13)|0;u=((o=o+Math.imul(c,G)|0)+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,i=Math.imul(g,D),n=(n=Math.imul(g,Y))+Math.imul(y,D)|0,o=Math.imul(y,Y),i=i+Math.imul(m,X)|0,n=(n=n+Math.imul(m,G)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,G)|0;var yt=(u+(i=i+Math.imul(l,Z)|0)|0)+((8191&(n=(n=n+Math.imul(l,W)|0)+Math.imul(c,Z)|0))<<13)|0;u=((o=o+Math.imul(c,W)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(M,D),n=(n=Math.imul(M,Y))+Math.imul(b,D)|0,o=Math.imul(b,Y),i=i+Math.imul(g,X)|0,n=(n=n+Math.imul(g,G)|0)+Math.imul(y,X)|0,o=o+Math.imul(y,G)|0,i=i+Math.imul(m,Z)|0,n=(n=n+Math.imul(m,W)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,W)|0;var wt=(u+(i=i+Math.imul(l,Q)|0)|0)+((8191&(n=(n=n+Math.imul(l,K)|0)+Math.imul(c,Q)|0))<<13)|0;u=((o=o+Math.imul(c,K)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(x,D),n=(n=Math.imul(x,Y))+Math.imul(E,D)|0,o=Math.imul(E,Y),i=i+Math.imul(M,X)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(b,X)|0,o=o+Math.imul(b,G)|0,i=i+Math.imul(g,Z)|0,n=(n=n+Math.imul(g,W)|0)+Math.imul(y,Z)|0,o=o+Math.imul(y,W)|0,i=i+Math.imul(m,Q)|0,n=(n=n+Math.imul(m,K)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,K)|0;var Mt=(u+(i=i+Math.imul(l,$)|0)|0)+((8191&(n=(n=n+Math.imul(l,tt)|0)+Math.imul(c,$)|0))<<13)|0;u=((o=o+Math.imul(c,tt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(T,D),n=(n=Math.imul(T,Y))+Math.imul(R,D)|0,o=Math.imul(R,Y),i=i+Math.imul(x,X)|0,n=(n=n+Math.imul(x,G)|0)+Math.imul(E,X)|0,o=o+Math.imul(E,G)|0,i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,W)|0)+Math.imul(b,Z)|0,o=o+Math.imul(b,W)|0,i=i+Math.imul(g,Q)|0,n=(n=n+Math.imul(g,K)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,K)|0,i=i+Math.imul(m,$)|0,n=(n=n+Math.imul(m,tt)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,tt)|0;var bt=(u+(i=i+Math.imul(l,et)|0)|0)+((8191&(n=(n=n+Math.imul(l,it)|0)+Math.imul(c,et)|0))<<13)|0;u=((o=o+Math.imul(c,it)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(I,D),n=(n=Math.imul(I,Y))+Math.imul(P,D)|0,o=Math.imul(P,Y),i=i+Math.imul(T,X)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,G)|0,i=i+Math.imul(x,Z)|0,n=(n=n+Math.imul(x,W)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,W)|0,i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,K)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,K)|0,i=i+Math.imul(g,$)|0,n=(n=n+Math.imul(g,tt)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,tt)|0,i=i+Math.imul(m,et)|0,n=(n=n+Math.imul(m,it)|0)+Math.imul(v,et)|0,o=o+Math.imul(v,it)|0;var _t=(u+(i=i+Math.imul(l,ot)|0)|0)+((8191&(n=(n=n+Math.imul(l,st)|0)+Math.imul(c,ot)|0))<<13)|0;u=((o=o+Math.imul(c,st)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(S,D),n=(n=Math.imul(S,Y))+Math.imul(C,D)|0,o=Math.imul(C,Y),i=i+Math.imul(I,X)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,G)|0,i=i+Math.imul(T,Z)|0,n=(n=n+Math.imul(T,W)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,W)|0,i=i+Math.imul(x,Q)|0,n=(n=n+Math.imul(x,K)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,K)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,tt)|0,i=i+Math.imul(g,et)|0,n=(n=n+Math.imul(g,it)|0)+Math.imul(y,et)|0,o=o+Math.imul(y,it)|0,i=i+Math.imul(m,ot)|0,n=(n=n+Math.imul(m,st)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,st)|0;var xt=(u+(i=i+Math.imul(l,ht)|0)|0)+((8191&(n=(n=n+Math.imul(l,ut)|0)+Math.imul(c,ht)|0))<<13)|0;u=((o=o+Math.imul(c,ut)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(k,D),n=(n=Math.imul(k,Y))+Math.imul(O,D)|0,o=Math.imul(O,Y),i=i+Math.imul(S,X)|0,n=(n=n+Math.imul(S,G)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,G)|0,i=i+Math.imul(I,Z)|0,n=(n=n+Math.imul(I,W)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,W)|0,i=i+Math.imul(T,Q)|0,n=(n=n+Math.imul(T,K)|0)+Math.imul(R,Q)|0,o=o+Math.imul(R,K)|0,i=i+Math.imul(x,$)|0,n=(n=n+Math.imul(x,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,i=i+Math.imul(M,et)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(b,et)|0,o=o+Math.imul(b,it)|0,i=i+Math.imul(g,ot)|0,n=(n=n+Math.imul(g,st)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0,i=i+Math.imul(m,ht)|0,n=(n=n+Math.imul(m,ut)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ut)|0;var Et=(u+(i=i+Math.imul(l,lt)|0)|0)+((8191&(n=(n=n+Math.imul(l,ct)|0)+Math.imul(c,lt)|0))<<13)|0;u=((o=o+Math.imul(c,ct)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(L,D),n=(n=Math.imul(L,Y))+Math.imul(j,D)|0,o=Math.imul(j,Y),i=i+Math.imul(k,X)|0,n=(n=n+Math.imul(k,G)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,G)|0,i=i+Math.imul(S,Z)|0,n=(n=n+Math.imul(S,W)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,W)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,K)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,K)|0,i=i+Math.imul(T,$)|0,n=(n=n+Math.imul(T,tt)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,tt)|0,i=i+Math.imul(x,et)|0,n=(n=n+Math.imul(x,it)|0)+Math.imul(E,et)|0,o=o+Math.imul(E,it)|0,i=i+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,st)|0)+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,i=i+Math.imul(g,ht)|0,n=(n=n+Math.imul(g,ut)|0)+Math.imul(y,ht)|0,o=o+Math.imul(y,ut)|0,i=i+Math.imul(m,lt)|0,n=(n=n+Math.imul(m,ct)|0)+Math.imul(v,lt)|0,o=o+Math.imul(v,ct)|0;var At=(u+(i=i+Math.imul(l,mt)|0)|0)+((8191&(n=(n=n+Math.imul(l,vt)|0)+Math.imul(c,mt)|0))<<13)|0;u=((o=o+Math.imul(c,vt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(L,X),n=(n=Math.imul(L,G))+Math.imul(j,X)|0,o=Math.imul(j,G),i=i+Math.imul(k,Z)|0,n=(n=n+Math.imul(k,W)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,W)|0,i=i+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,K)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,K)|0,i=i+Math.imul(I,$)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,i=i+Math.imul(T,et)|0,n=(n=n+Math.imul(T,it)|0)+Math.imul(R,et)|0,o=o+Math.imul(R,it)|0,i=i+Math.imul(x,ot)|0,n=(n=n+Math.imul(x,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,i=i+Math.imul(M,ht)|0,n=(n=n+Math.imul(M,ut)|0)+Math.imul(b,ht)|0,o=o+Math.imul(b,ut)|0,i=i+Math.imul(g,lt)|0,n=(n=n+Math.imul(g,ct)|0)+Math.imul(y,lt)|0,o=o+Math.imul(y,ct)|0;var Tt=(u+(i=i+Math.imul(m,mt)|0)|0)+((8191&(n=(n=n+Math.imul(m,vt)|0)+Math.imul(v,mt)|0))<<13)|0;u=((o=o+Math.imul(v,vt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(L,Z),n=(n=Math.imul(L,W))+Math.imul(j,Z)|0,o=Math.imul(j,W),i=i+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,K)|0)+Math.imul(O,Q)|0,o=o+Math.imul(O,K)|0,i=i+Math.imul(S,$)|0,n=(n=n+Math.imul(S,tt)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,tt)|0,i=i+Math.imul(I,et)|0,n=(n=n+Math.imul(I,it)|0)+Math.imul(P,et)|0,o=o+Math.imul(P,it)|0,i=i+Math.imul(T,ot)|0,n=(n=n+Math.imul(T,st)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,i=i+Math.imul(x,ht)|0,n=(n=n+Math.imul(x,ut)|0)+Math.imul(E,ht)|0,o=o+Math.imul(E,ut)|0,i=i+Math.imul(M,lt)|0,n=(n=n+Math.imul(M,ct)|0)+Math.imul(b,lt)|0,o=o+Math.imul(b,ct)|0;var Rt=(u+(i=i+Math.imul(g,mt)|0)|0)+((8191&(n=(n=n+Math.imul(g,vt)|0)+Math.imul(y,mt)|0))<<13)|0;u=((o=o+Math.imul(y,vt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,i=Math.imul(L,Q),n=(n=Math.imul(L,K))+Math.imul(j,Q)|0,o=Math.imul(j,K),i=i+Math.imul(k,$)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,i=i+Math.imul(S,et)|0,n=(n=n+Math.imul(S,it)|0)+Math.imul(C,et)|0,o=o+Math.imul(C,it)|0,i=i+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,i=i+Math.imul(T,ht)|0,n=(n=n+Math.imul(T,ut)|0)+Math.imul(R,ht)|0,o=o+Math.imul(R,ut)|0,i=i+Math.imul(x,lt)|0,n=(n=n+Math.imul(x,ct)|0)+Math.imul(E,lt)|0,o=o+Math.imul(E,ct)|0;var Ut=(u+(i=i+Math.imul(M,mt)|0)|0)+((8191&(n=(n=n+Math.imul(M,vt)|0)+Math.imul(b,mt)|0))<<13)|0;u=((o=o+Math.imul(b,vt)|0)+(n>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,i=Math.imul(L,$),n=(n=Math.imul(L,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),i=i+Math.imul(k,et)|0,n=(n=n+Math.imul(k,it)|0)+Math.imul(O,et)|0,o=o+Math.imul(O,it)|0,i=i+Math.imul(S,ot)|0,n=(n=n+Math.imul(S,st)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,i=i+Math.imul(I,ht)|0,n=(n=n+Math.imul(I,ut)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ut)|0,i=i+Math.imul(T,lt)|0,n=(n=n+Math.imul(T,ct)|0)+Math.imul(R,lt)|0,o=o+Math.imul(R,ct)|0;var It=(u+(i=i+Math.imul(x,mt)|0)|0)+((8191&(n=(n=n+Math.imul(x,vt)|0)+Math.imul(E,mt)|0))<<13)|0;u=((o=o+Math.imul(E,vt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(L,et),n=(n=Math.imul(L,it))+Math.imul(j,et)|0,o=Math.imul(j,it),i=i+Math.imul(k,ot)|0,n=(n=n+Math.imul(k,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,i=i+Math.imul(S,ht)|0,n=(n=n+Math.imul(S,ut)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ut)|0,i=i+Math.imul(I,lt)|0,n=(n=n+Math.imul(I,ct)|0)+Math.imul(P,lt)|0,o=o+Math.imul(P,ct)|0;var Pt=(u+(i=i+Math.imul(T,mt)|0)|0)+((8191&(n=(n=n+Math.imul(T,vt)|0)+Math.imul(R,mt)|0))<<13)|0;u=((o=o+Math.imul(R,vt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(L,ot),n=(n=Math.imul(L,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),i=i+Math.imul(k,ht)|0,n=(n=n+Math.imul(k,ut)|0)+Math.imul(O,ht)|0,o=o+Math.imul(O,ut)|0,i=i+Math.imul(S,lt)|0,n=(n=n+Math.imul(S,ct)|0)+Math.imul(C,lt)|0,o=o+Math.imul(C,ct)|0;var Bt=(u+(i=i+Math.imul(I,mt)|0)|0)+((8191&(n=(n=n+Math.imul(I,vt)|0)+Math.imul(P,mt)|0))<<13)|0;u=((o=o+Math.imul(P,vt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,i=Math.imul(L,ht),n=(n=Math.imul(L,ut))+Math.imul(j,ht)|0,o=Math.imul(j,ut),i=i+Math.imul(k,lt)|0,n=(n=n+Math.imul(k,ct)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ct)|0;var St=(u+(i=i+Math.imul(S,mt)|0)|0)+((8191&(n=(n=n+Math.imul(S,vt)|0)+Math.imul(C,mt)|0))<<13)|0;u=((o=o+Math.imul(C,vt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(L,lt),n=(n=Math.imul(L,ct))+Math.imul(j,lt)|0,o=Math.imul(j,ct);var Ct=(u+(i=i+Math.imul(k,mt)|0)|0)+((8191&(n=(n=n+Math.imul(k,vt)|0)+Math.imul(O,mt)|0))<<13)|0;u=((o=o+Math.imul(O,vt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var zt=(u+(i=Math.imul(L,mt))|0)+((8191&(n=(n=Math.imul(L,vt))+Math.imul(j,mt)|0))<<13)|0;return u=((o=Math.imul(j,vt))+(n>>>13)|0)+(zt>>>26)|0,zt&=67108863,h[0]=dt,h[1]=gt,h[2]=yt,h[3]=wt,h[4]=Mt,h[5]=bt,h[6]=_t,h[7]=xt,h[8]=Et,h[9]=At,h[10]=Tt,h[11]=Rt,h[12]=Ut,h[13]=It,h[14]=Pt,h[15]=Bt,h[16]=St,h[17]=Ct,h[18]=zt,0!==u&&(h[19]=u,e.length++),e};function p(t,r,e){return(new m).mulp(t,r,e)}function m(t,r){this.x=t,this.y=r}Math.imul||(c=l),n.prototype.mulTo=function(t,r){var e=this.length+t.length;return 10===this.length&&10===t.length?c(this,t,r):e<63?l(this,t,r):e<1024?function(t,r,e){e.negative=r.negative^t.negative,e.length=t.length+r.length;for(var i=0,n=0,o=0;o<e.length-1;o++){var s=n;n=0;for(var a=67108863&i,h=Math.min(o,r.length-1),u=Math.max(0,o-t.length+1);u<=h;u++){var f=o-u,l=(0|t.words[f])*(0|r.words[u]),c=67108863&l;a=67108863&(c=c+a|0),n+=(s=(s=s+(l/67108864|0)|0)+(c>>>26)|0)>>>26,s&=67108863}e.words[o]=a,i=s,s=n}return 0!==i?e.words[o]=i:e.length--,e.strip()}(this,t,r):p(this,t,r)},m.prototype.makeRBT=function(t){for(var r=new Array(t),e=n.prototype._countBits(t)-1,i=0;i<t;i++)r[i]=this.revBin(i,e,t);return r},m.prototype.revBin=function(t,r,e){if(0===t||t===e-1)return t;for(var i=0,n=0;n<r;n++)i|=(1&t)<<r-n-1,t>>=1;return i},m.prototype.permute=function(t,r,e,i,n,o){for(var s=0;s<o;s++)i[s]=r[t[s]],n[s]=e[t[s]]},m.prototype.transform=function(t,r,e,i,n,o){this.permute(o,t,r,e,i,n);for(var s=1;s<n;s<<=1)for(var a=s<<1,h=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),f=0;f<n;f+=a)for(var l=h,c=u,p=0;p<s;p++){var m=e[f+p],v=i[f+p],d=e[f+p+s],g=i[f+p+s],y=l*d-c*g;g=l*g+c*d,d=y,e[f+p]=m+d,i[f+p]=v+g,e[f+p+s]=m-d,i[f+p+s]=v-g,p!==a&&(y=h*l-u*c,c=h*c+u*l,l=y)}},m.prototype.guessLen13b=function(t,r){var e=1|Math.max(r,t),i=1&e,n=0;for(e=e/2|0;e;e>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(t,r,e){if(!(e<=1))for(var i=0;i<e/2;i++){var n=t[i];t[i]=t[e-i-1],t[e-i-1]=n,n=r[i],r[i]=-r[e-i-1],r[e-i-1]=-n}},m.prototype.normalize13b=function(t,r){for(var e=0,i=0;i<r/2;i++){var n=8192*Math.round(t[2*i+1]/r)+Math.round(t[2*i]/r)+e;t[i]=67108863&n,e=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,r,i,n){for(var o=0,s=0;s<r;s++)o+=0|t[s],i[2*s]=8191&o,o>>>=13,i[2*s+1]=8191&o,o>>>=13;for(s=2*r;s<n;++s)i[s]=0;e(0===o),e(0==(-8192&o))},m.prototype.stub=function(t){for(var r=new Array(t),e=0;e<t;e++)r[e]=0;return r},m.prototype.mulp=function(t,r,e){var i=2*this.guessLen13b(t.length,r.length),n=this.makeRBT(i),o=this.stub(i),s=new Array(i),a=new Array(i),h=new Array(i),u=new Array(i),f=new Array(i),l=new Array(i),c=e.words;c.length=i,this.convert13b(t.words,t.length,s,i),this.convert13b(r.words,r.length,u,i),this.transform(s,o,a,h,i,n),this.transform(u,o,f,l,i,n);for(var p=0;p<i;p++){var m=a[p]*f[p]-h[p]*l[p];h[p]=a[p]*l[p]+h[p]*f[p],a[p]=m}return this.conjugate(a,h,i),this.transform(a,h,c,o,i,n),this.conjugate(c,o,i),this.normalize13b(c,i),e.negative=t.negative^r.negative,e.length=t.length+r.length,e.strip()},n.prototype.mul=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},n.prototype.mulf=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),p(this,t,r)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){e("number"==typeof t),e(t<67108864);for(var r=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,o=(67108863&n)+(67108863&r);r>>=26,r+=n/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var r=function(t){for(var r=new Array(t.bitLength()),e=0;e<r.length;e++){var i=e/26|0,n=e%26;r[e]=(t.words[i]&1<<n)>>>n}return r}(t);if(0===r.length)return new n(1);for(var e=this,i=0;i<r.length&&0===r[i];i++,e=e.sqr());if(++i<r.length)for(var o=e.sqr();i<r.length;i++,o=o.sqr())0!==r[i]&&(e=e.mul(o));return e},n.prototype.iushln=function(t){e("number"==typeof t&&t>=0);var r,i=t%26,n=(t-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(r=0;r<this.length;r++){var a=this.words[r]&o,h=(0|this.words[r])-a<<i;this.words[r]=h|s,s=a>>>26-i}s&&(this.words[r]=s,this.length++)}if(0!==n){for(r=this.length-1;r>=0;r--)this.words[r+n]=this.words[r];for(r=0;r<n;r++)this.words[r]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(t){return e(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,r,i){var n;e("number"==typeof t&&t>=0),n=r?(r-r%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,h=i;if(n-=s,n=Math.max(0,n),h){for(var u=0;u<s;u++)h.words[u]=this.words[u];h.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var f=0;for(u=this.length-1;u>=0&&(0!==f||u>=n);u--){var l=0|this.words[u];this.words[u]=f<<26-o|l>>>o,f=l&a}return h&&0!==f&&(h.words[h.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,r,i){return e(0===this.negative),this.iushrn(t,r,i)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){e("number"==typeof t&&t>=0);var r=t%26,i=(t-r)/26,n=1<<r;return!(this.length<=i)&&!!(this.words[i]&n)},n.prototype.imaskn=function(t){e("number"==typeof t&&t>=0);var r=t%26,i=(t-r)/26;if(e(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==r&&i++,this.length=Math.min(i,this.length),0!==r){var n=67108863^67108863>>>r<<r;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return e("number"==typeof t),e(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},n.prototype.isubn=function(t){if(e("number"==typeof t),e(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,r,i){var n,o,s=t.length+i;this._expand(s);var a=0;for(n=0;n<t.length;n++){o=(0|this.words[n+i])+a;var h=(0|t.words[n])*r;a=((o-=67108863&h)>>26)-(h/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)a=(o=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&o;if(0===a)return this.strip();for(e(-1===a),a=0,n=0;n<this.length;n++)a=(o=-(0|this.words[n])+a)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,r){var e=(this.length,t.length),i=this.clone(),o=t,s=0|o.words[o.length-1];0!==(e=26-this._countBits(s))&&(o=o.ushln(e),i.iushln(e),s=0|o.words[o.length-1]);var a,h=i.length-o.length;if("mod"!==r){(a=new n(null)).length=h+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var f=i.clone()._ishlnsubmul(o,1,h);0===f.negative&&(i=f,a&&(a.words[h]=1));for(var l=h-1;l>=0;l--){var c=67108864*(0|i.words[o.length+l])+(0|i.words[o.length+l-1]);for(c=Math.min(c/s|0,67108863),i._ishlnsubmul(o,c,l);0!==i.negative;)c--,i.negative=0,i._ishlnsubmul(o,1,l),i.isZero()||(i.negative^=1);a&&(a.words[l]=c)}return a&&a.strip(),i.strip(),"div"!==r&&0!==e&&i.iushrn(e),{div:a||null,mod:i}},n.prototype.divmod=function(t,r,i){return e(!t.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,r),"mod"!==r&&(o=a.div.neg()),"div"!==r&&(s=a.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:o,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),r),"mod"!==r&&(o=a.div.neg()),{div:o,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),r),"div"!==r&&(s=a.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:1===t.length?"div"===r?{div:this.divn(t.words[0]),mod:null}:"mod"===r?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,r);var o,s,a},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var e=0!==r.div.negative?r.mod.isub(t):r.mod,i=t.ushrn(1),n=t.andln(1),o=e.cmp(i);return o<0||1===n&&0===o?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)},n.prototype.modn=function(t){e(t<=67108863);for(var r=(1<<26)%t,i=0,n=this.length-1;n>=0;n--)i=(r*i+(0|this.words[n]))%t;return i},n.prototype.idivn=function(t){e(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*r;this.words[i]=n/t|0,r=n%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){e(0===t.negative),e(!t.isZero());var r=this,i=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var o=new n(1),s=new n(0),a=new n(0),h=new n(1),u=0;r.isEven()&&i.isEven();)r.iushrn(1),i.iushrn(1),++u;for(var f=i.clone(),l=r.clone();!r.isZero();){for(var c=0,p=1;0==(r.words[0]&p)&&c<26;++c,p<<=1);if(c>0)for(r.iushrn(c);c-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(f),s.isub(l)),o.iushrn(1),s.iushrn(1);for(var m=0,v=1;0==(i.words[0]&v)&&m<26;++m,v<<=1);if(m>0)for(i.iushrn(m);m-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(f),h.isub(l)),a.iushrn(1),h.iushrn(1);r.cmp(i)>=0?(r.isub(i),o.isub(a),s.isub(h)):(i.isub(r),a.isub(o),h.isub(s))}return{a:a,b:h,gcd:i.iushln(u)}},n.prototype._invmp=function(t){e(0===t.negative),e(!t.isZero());var r=this,i=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var o,s=new n(1),a=new n(0),h=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var u=0,f=1;0==(r.words[0]&f)&&u<26;++u,f<<=1);if(u>0)for(r.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(h),s.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(a)):(i.isub(r),a.isub(s))}return(o=0===r.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(t),o},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),e=t.clone();r.negative=0,e.negative=0;for(var i=0;r.isEven()&&e.isEven();i++)r.iushrn(1),e.iushrn(1);for(;;){for(;r.isEven();)r.iushrn(1);for(;e.isEven();)e.iushrn(1);var n=r.cmp(e);if(n<0){var o=r;r=e,e=o}else if(0===n||0===e.cmpn(1))break;r.isub(e)}return e.iushln(i)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){e("number"==typeof t);var r=t%26,i=(t-r)/26,n=1<<r;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,s=i;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var r,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)r=1;else{i&&(t=-t),e(t<=67108863,"Number is too big");var n=0|this.words[0];r=n===t?0:n<t?-1:1}return 0!==this.negative?0|-r:r},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var r=this.ucmp(t);return 0!==this.negative?0|-r:r},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,e=this.length-1;e>=0;e--){var i=0|this.words[e],n=0|t.words[e];if(i!==n){i<n?r=-1:i>n&&(r=1);break}}return r},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return-1===this.cmpn(t)},n.prototype.lt=function(t){return-1===this.cmp(t)},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new b(t)},n.prototype.toRed=function(t){return e(!this.red,"Already a number in reduction context"),e(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return e(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return e(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function d(t,r){this.name=t,this.p=new n(r,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){d.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){d.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){d.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){d.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function b(t){if("string"==typeof t){var r=n._prime(t);this.m=r.p,this.prime=r}else e(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){b.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},d.prototype.ireduce=function(t){var r,e=t;do{this.split(e,this.tmp),r=(e=(e=this.imulK(e)).iadd(this.tmp)).bitLength()}while(r>this.n);var i=r<this.n?-1:e.ucmp(this.p);return 0===i?(e.words[0]=0,e.length=1):i>0?e.isub(this.p):e.strip(),e},d.prototype.split=function(t,r){t.iushrn(this.n,0,r)},d.prototype.imulK=function(t){return t.imul(this.k)},i(g,d),g.prototype.split=function(t,r){for(var e=Math.min(t.length,9),i=0;i<e;i++)r.words[i]=t.words[i];if(r.length=e,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(r.words[r.length++]=4194303&n,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,e=0;e<t.length;e++){var i=0|t.words[e];r+=977*i,t.words[e]=67108863&r,r=64*i+(r/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(y,d),i(w,d),i(M,d),M.prototype.imulK=function(t){for(var r=0,e=0;e<t.length;e++){var i=19*(0|t.words[e])+r,n=67108863&i;i>>>=26,t.words[e]=n,r=i}return 0!==r&&(t.words[t.length++]=r),t},n._prime=function(t){if(v[t])return v[t];var r;if("k256"===t)r=new g;else if("p224"===t)r=new y;else if("p192"===t)r=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);r=new M}return v[t]=r,r},b.prototype._verify1=function(t){e(0===t.negative,"red works only with positives"),e(t.red,"red works only with red numbers")},b.prototype._verify2=function(t,r){e(0==(t.negative|r.negative),"red works only with positives"),e(t.red&&t.red===r.red,"red works only with red numbers")},b.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},b.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},b.prototype.add=function(t,r){this._verify2(t,r);var e=t.add(r);return e.cmp(this.m)>=0&&e.isub(this.m),e._forceRed(this)},b.prototype.iadd=function(t,r){this._verify2(t,r);var e=t.iadd(r);return e.cmp(this.m)>=0&&e.isub(this.m),e},b.prototype.sub=function(t,r){this._verify2(t,r);var e=t.sub(r);return e.cmpn(0)<0&&e.iadd(this.m),e._forceRed(this)},b.prototype.isub=function(t,r){this._verify2(t,r);var e=t.isub(r);return e.cmpn(0)<0&&e.iadd(this.m),e},b.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},b.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},b.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},b.prototype.isqr=function(t){return this.imul(t,t.clone())},b.prototype.sqr=function(t){return this.mul(t,t)},b.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(e(r%2==1),3===r){var i=this.m.add(new n(1)).iushrn(2);return this.pow(t,i)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);e(!o.isZero());var a=new n(1).toRed(this),h=a.redNeg(),u=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new n(2*f*f).toRed(this);0!==this.pow(f,u).cmp(h);)f.redIAdd(h);for(var l=this.pow(f,o),c=this.pow(t,o.addn(1).iushrn(1)),p=this.pow(t,o),m=s;0!==p.cmp(a);){for(var v=p,d=0;0!==v.cmp(a);d++)v=v.redSqr();e(d<m);var g=this.pow(l,new n(1).iushln(m-d-1));c=c.redMul(g),l=g.redSqr(),p=p.redMul(l),m=d}return c},b.prototype.invm=function(t){var r=t._invmp(this.m);return 0!==r.negative?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},b.prototype.pow=function(t,r){if(r.isZero())return new n(1).toRed(this);if(0===r.cmpn(1))return t.clone();var e=new Array(16);e[0]=new n(1).toRed(this),e[1]=t;for(var i=2;i<e.length;i++)e[i]=this.mul(e[i-1],t);var o=e[0],s=0,a=0,h=r.bitLength()%26;for(0===h&&(h=26),i=r.length-1;i>=0;i--){for(var u=r.words[i],f=h-1;f>=0;f--){var l=u>>f&1;o!==e[0]&&(o=this.sqr(o)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===i&&0===f)&&(o=this.mul(o,e[s]),a=0,s=0)):a=0}h=26}return o},b.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},b.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},n.mont=function(t){return new _(t)},i(_,b),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},_.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var e=t.imul(r),i=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=e.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},_.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new n(0)._forceRed(this);var e=t.mul(r),i=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=e.isub(i).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,vt)})),He=function(t){return t&&"object"==typeof t&&Boolean(t.words)};var Qe=function(t){return Array.isArray(t)&&2===t.length&&He(t[0])&&He(t[1])};var Ke=dt((function(t){var r=!1;if("undefined"!=typeof Float64Array){var e=new Float64Array(1),i=new Uint32Array(e.buffer);if(e[0]=1,r=!0,1072693248===i[1]){t.exports=function(t){return e[0]=t,[i[0],i[1]]},t.exports.pack=function(t,r){return i[0]=t,i[1]=r,e[0]},t.exports.lo=function(t){return e[0]=t,i[0]},t.exports.hi=function(t){return e[0]=t,i[1]}}else if(1072693248===i[0]){t.exports=function(t){return e[0]=t,[i[1],i[0]]},t.exports.pack=function(t,r){return i[1]=t,i[0]=r,e[0]},t.exports.lo=function(t){return e[0]=t,i[1]},t.exports.hi=function(t){return e[0]=t,i[0]}}else r=!1}if(!r){var n=new Buffer(8);t.exports=function(t){return n.writeDoubleLE(t,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},t.exports.pack=function(t,r){return n.writeUInt32LE(t,0,!0),n.writeUInt32LE(r,4,!0),n.readDoubleLE(0,!0)},t.exports.lo=function(t){return n.writeDoubleLE(t,0,!0),n.readUInt32LE(0,!0)},t.exports.hi=function(t){return n.writeDoubleLE(t,0,!0),n.readUInt32LE(4,!0)}}t.exports.sign=function(r){return t.exports.hi(r)>>>31},t.exports.exponent=function(r){return(t.exports.hi(r)<<1>>>21)-1023},t.exports.fraction=function(r){var e=t.exports.lo(r),i=t.exports.hi(r),n=1048575&i;return 2146435072&i&&(n+=1<<20),[e,n]},t.exports.denormalized=function(r){return!(2146435072&t.exports.hi(r))}})),Je=(Ke.pack,Ke.lo,Ke.hi,Ke.sign,Ke.exponent,Ke.fraction,Ke.denormalized,function(t){var r=Ke.exponent(t);return r<52?new We(t):new We(t*Math.pow(2,52-r)).ushln(r-52)});var $e=function(t){return new We(t)};var ti=function(t){return t.cmp(new We(0))};var ri=function(t,r){var e=ti(t),i=ti(r);if(0===e)return[Je(0),Je(1)];if(0===i)return[Je(0),Je(0)];i<0&&(t=t.neg(),r=r.neg());var n=t.gcd(r);if(n.cmpn(1))return[t.div(n),r.div(n)];return[t,r]};var ei=function(t,r){return ri(t[0].mul(r[1]),t[1].mul(r[0]))};var ii=function t(r,e){if(Qe(r))return e?ei(r,t(e)):[r[0].clone(),r[1].clone()];var i,n,o=0;if(He(r))i=r.clone();else if("string"==typeof r)i=$e(r);else{if(0===r)return[Je(0),Je(1)];if(r===Math.floor(r))i=Je(r);else{for(;r!==Math.floor(r);)r*=Math.pow(2,256),o-=256;i=Je(r)}}if(Qe(e))i.mul(e[1]),n=e[0].clone();else if(He(e))n=e.clone();else if("string"==typeof e)n=$e(e);else if(e)if(e===Math.floor(e))n=Je(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),o+=256;n=Je(e)}else n=Je(1);o>0?i=i.ushln(o):o<0&&(n=n.ushln(-o));return ri(i,n)};var ni=function(t,r){return t[0].mul(r[1]).cmp(r[0].mul(t[1]))};var oi=function(t){var r=t.length,e=t.words,i=0;if(1===r)i=e[0];else if(2===r)i=e[0]+67108864*e[1];else for(var n=0;n<r;n++){var o=e[n];i+=o*Math.pow(67108864,n)}return ti(t)*i};var si=Kt.countTrailingZeros,ai=function(t){var r=si(Ke.lo(t));if(r<32)return r;var e=si(Ke.hi(t));if(e>20)return 52;return e+32};var hi=function(t){var r=t[0],e=t[1];if(0===r.cmpn(0))return 0;var i=r.abs().divmod(e.abs()),n=i.div,o=oi(n),s=i.mod,a=r.negative!==e.negative?-1:1;if(0===s.cmpn(0))return a*o;if(o){var h=ai(o)+4,u=oi(s.ushln(h).divRound(e));return a*(o+u*Math.pow(2,-h))}var f=e.bitLength()-s.bitLength()+53;u=oi(s.ushln(f).divRound(e));return f<1023?a*u*Math.pow(2,-f):(u*=Math.pow(2,-1023),a*u*Math.pow(2,1023-f))};var ui=function(t){for(var r=new Array(t.length),e=0;e<t.length;++e)r[e]=ii(t[e]);return r};var fi=Math.pow(2,-1074),li=function(t,r){if(isNaN(t)||isNaN(r))return NaN;if(t===r)return t;if(0===t)return r<0?-fi:fi;var e=Ke.hi(t),i=Ke.lo(t);r>t==t>0?i===-1>>>0?(e+=1,i=0):i+=1:0===i?(i=-1>>>0,e-=1):i-=1;return Ke.pack(i,e)};var ci=function(t,r){return ri(t[0].mul(r[0]),t[1].mul(r[1]))};var pi=function(t,r){return ri(t[0].mul(r[1]).sub(t[1].mul(r[0])),t[1].mul(r[1]))};var mi=function(t){return ti(t[0])*ti(t[1])};var vi=function(t,r){for(var e=t.length,i=new Array(e),n=0;n<e;++n)i[n]=pi(t[n],r[n]);return i};var di=function(t,r){return ri(t[0].mul(r[1]).add(r[0].mul(t[1])),t[1].mul(r[1]))};var gi=function(t,r){for(var e=t.length,i=new Array(e),n=0;n<e;++n)i[n]=di(t[n],r[n]);return i};var yi=function(t,r){for(var e=ii(r),i=t.length,n=new Array(i),o=0;o<i;++o)n[o]=ci(t[o],e);return n};var wi=function(t,r,e,i){var n=vi(r,t),o=vi(i,e),s=Mi(n,o);if(0===mi(s))return null;var a=vi(t,e),h=Mi(o,a),u=ei(h,s),f=yi(n,u);return gi(t,f)};function Mi(t,r){return pi(ci(t[0],r[1]),ci(t[1],r[0]))}var bi=function(t){var r=t.length;if(0===r)return[[],[]];for(var e=t[0].length,i=t[0].slice(),n=t[0].slice(),o=1;o<r;++o)for(var s=t[o],a=0;a<e;++a){var h=s[a];i[a]=Math.min(i[a],h),n[a]=Math.max(n[a],h)}return[i,n]};var _i=function(t,r,e){return(e-t)/(r-t)},xi=Object.getOwnPropertySymbols,Ei=Object.prototype.hasOwnProperty,Ai=Object.prototype.propertyIsEnumerable;
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function Ti(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var r={},e=0;e<10;e++)r["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(r).map((function(t){return r[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}})()&&Object.assign;var Ri=function(t,r){if(t.length<=1)return t;for(var e,i,n,o,s,a=(r="number"==typeof r?r:1)*r,h=t[0],u=[h],f=1,l=t.length;f<l;f++)e=t[f],n=h,o=void 0,s=void 0,o=(i=e)[0]-n[0],s=i[1]-n[1],o*o+s*s>a&&(u.push(e),h=e);return h!==e&&u.push(e),u};function Ui(t,r,e){var i=r[0],n=r[1],o=e[0]-i,s=e[1]-n;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-n)*s)/(o*o+s*s);a>1?(i=e[0],n=e[1]):a>0&&(i+=o*a,n+=s*a)}return(o=t[0]-i)*o+(s=t[1]-n)*s}var Ii=function(t,r){if(t.length<=1)return t;var e=(r="number"==typeof r?r:1)*r,i=t.length-1,n=[t[0]];return function t(r,e,i,n,o){for(var s,a=n,h=e+1;h<i;h++){var u=Ui(r[h],r[e],r[i]);u>a&&(s=h,a=u)}a>n&&(s-e>1&&t(r,e,s,n,o),o.push(r[s]),i-s>1&&t(r,s,i,n,o))}(t,0,i,e,n),n.push(t[i]),n},Pi=function(t){var r=[];return t.replace(Si,(function(t,e,i){var n=e.toLowerCase();for(i=function(t){var r=t.match(Ci);return r?r.map(Number):[]}(i),"m"==n&&i.length>2&&(r.push([e].concat(i.splice(0,2))),n="l",e="m"==e?"l":"L");;){if(i.length==Bi[n])return i.unshift(e),r.push(i);if(i.length<Bi[n])throw new Error("malformed path data");r.push([e].concat(i.splice(0,Bi[n])))}})),r},Bi={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Si=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var Ci=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function zi(t,r,e){return t[0]=r,t[1]=e,t}var ki=[0,0],Oi=[0,0],Ni=[0,0];var Li=function(t,r){var e=[],i=[],n=[0,0];return st(it(t)).forEach((function(t,o,s){if("M"===t[0])!function(t,r){t[0]=r[0],t[1]=r[1]}(n,t.slice(1)),i.length>0&&(e.push(i),i=[]);else{if("C"!==t[0])throw new Error("illegal type in SVG: "+t[0]);!function(t,r,e,i){et(e,zi(ki,i[1],i[2]),zi(Oi,i[3],i[4]),zi(Ni,i[5],i[6]),r,t)}(i,r,n,t),zi(n,t[5],t[6])}})),i.length>0&&e.push(i),e},ji=function(t,r,e){Array.isArray(r)?(e=e||{},r=r||[]):(e=r||{},r=[]);var i=!!Yi(e,"delaunay",!0),n=!!Yi(e,"interior",!0),o=!!Yi(e,"exterior",!0),s=!!Yi(e,"infinity",!1);if(!n&&!o||0===t.length)return[];var a=At(t,r);if(i||n!==o||s){for(var h=zt(t.length,function(t){return t.map(Fi).sort(Di)}(r)),u=0;u<a.length;++u){var f=a[u];h.addTriangle(f[0],f[1],f[2])}return i&&jt(t,h),o?n?s?Yt(h,0,s):h.cells():Yt(h,1,s):Yt(h,-1)}return a};function Fi(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function Di(t,r){return t[0]-r[0]||t[1]-r[1]}function Yi(t,r,e){return r in t?t[r]:e}var qi=function(t,r,e){var i;if(e){i=r;for(var n=new Array(r.length),o=0;o<r.length;++o){var s=r[o];n[o]=[s[0],s[1],e[o]]}r=n}var a=function(t,r,e){var i=Vi(t,[],Gi(t));return Hi(r,i,e),!!i}(t,r,!!e);for(;Qi(t,r,!!e);)a=!0;if(e&&a){i.length=0,e.length=0;for(o=0;o<r.length;++o){s=r[o];i.push([s[0],s[1]]),e.push(s[2])}}return a};function Xi(t){var r=hi(t);return[li(r,-1/0),li(r,1/0)]}function Gi(t){for(var r=new Array(t.length),e=0;e<t.length;++e){var i=t[e];r[e]=[li(i[0],-1/0),li(i[1],-1/0),li(i[0],1/0),li(i[1],1/0)]}return r}function Vi(t,r,e){for(var i=r.length,n=new Gt(i),o=[],s=0;s<r.length;++s){var a=r[s],h=Xi(a[0]),u=Xi(a[1]);o.push([li(h[0],-1/0),li(u[0],-1/0),li(h[1],1/0),li(u[1],1/0)])}je(o,(function(t,r){n.link(t,r)}));var f=!0,l=new Array(i);for(s=0;s<i;++s){(p=n.find(s))!==s&&(f=!1,t[p]=[Math.min(t[s][0],t[p][0]),Math.min(t[s][1],t[p][1])])}if(f)return null;var c=0;for(s=0;s<i;++s){var p;(p=n.find(s))===s?(l[s]=c,t[c++]=t[s]):l[s]=-1}t.length=c;for(s=0;s<i;++s)l[s]<0&&(l[s]=l[n.find(s)]);return l}function Zi(t,r){return t[0]-r[0]||t[1]-r[1]}function Wi(t,r){var e=t[0]-r[0]||t[1]-r[1];return e||(t[2]<r[2]?-1:t[2]>r[2]?1:0)}function Hi(t,r,e){if(0!==t.length){if(r)for(var i=0;i<t.length;++i){var n=r[(s=t[i])[0]],o=r[s[1]];s[0]=Math.min(n,o),s[1]=Math.max(n,o)}else for(i=0;i<t.length;++i){var s;n=(s=t[i])[0],o=s[1];s[0]=Math.min(n,o),s[1]=Math.max(n,o)}e?t.sort(Wi):t.sort(Zi);var a=1;for(i=1;i<t.length;++i){var h=t[i-1],u=t[i];(u[0]!==h[0]||u[1]!==h[1]||e&&u[2]!==h[2])&&(t[a++]=u)}t.length=a}}function Qi(t,r,e){var i=function(t,r){for(var e=new Array(r.length),i=0;i<r.length;++i){var n=r[i],o=t[n[0]],s=t[n[1]];e[i]=[li(Math.min(o[0],s[0]),-1/0),li(Math.min(o[1],s[1]),-1/0),li(Math.max(o[0],s[0]),1/0),li(Math.max(o[1],s[1]),1/0)]}return e}(t,r),n=function(t,r,e){var i=[];return je(e,(function(e,n){var o=r[e],s=r[n];if(o[0]!==s[0]&&o[0]!==s[1]&&o[1]!==s[0]&&o[1]!==s[1]){var a=t[o[0]],h=t[o[1]],u=t[s[0]],f=t[s[1]];Ve(a,h,u,f)&&i.push([e,n])}})),i}(t,r,i),o=function(t,r,e,i){var n=[];return je(e,i,(function(e,i){var o=r[e];if(o[0]!==i&&o[1]!==i){var s=t[i],a=t[o[0]],h=t[o[1]];Ve(a,h,s,s)&&n.push([e,i])}})),n}(t,r,i,Gi(t)),s=Vi(t,function(t,r,e,i,n){var o,s,a=t.map((function(t){return[ii(t[0]),ii(t[1])]}));for(o=0;o<e.length;++o){var h=e[o];s=h[0];var u=h[1],f=r[s],l=r[u],c=wi(ui(t[f[0]]),ui(t[f[1]]),ui(t[l[0]]),ui(t[l[1]]));if(c){var p=t.length;t.push([hi(c[0]),hi(c[1])]),a.push(c),i.push([s,p],[u,p])}}for(i.sort((function(t,r){if(t[0]!==r[0])return t[0]-r[0];var e=a[t[1]],i=a[r[1]];return ni(e[0],i[0])||ni(e[1],i[1])})),o=i.length-1;o>=0;--o){var m=r[s=(_=i[o])[0]],v=m[0],d=m[1],g=t[v],y=t[d];if((g[0]-y[0]||g[1]-y[1])<0){var w=v;v=d,d=w}m[0]=v;var M,b=m[1]=_[1];for(n&&(M=m[2]);o>0&&i[o-1][0]===s;){var _,x=(_=i[--o])[1];n?r.push([b,x,M]):r.push([b,x]),b=x}n?r.push([b,d,M]):r.push([b,d])}return a}(t,r,n,o,e));return Hi(r,s,e),!!s||(n.length>0||o.length>0)}var Ki=function(t,r){if(!Array.isArray(t))throw new TypeError("must specify positions as first argument");Array.isArray(r)||(r=bi(t));var e=r[0],i=r[1],n=i[0]-e[0],o=i[1]-e[1],s=n>o?1:o/n,a=n>o?n/o:1;if(i[0]-e[0]==0||i[1]-e[1]==0)return t;for(var h=0;h<t.length;h++){var u=t[h];u[0]=(2*_i(e[0],i[0],u[0])-1)/s,u[1]=(2*_i(e[1],i[1],u[1])-1)/a}return t};var Ji=function(t,r){if(void 0===r&&(r=t,t=0),"number"!=typeof t||"number"!=typeof r)throw new TypeError("Expected all arguments to be numbers");return Math.random()*(r-t)+t},$i=Object.getOwnPropertySymbols,tn=Object.prototype.hasOwnProperty,rn=Object.prototype.propertyIsEnumerable;
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function en(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var nn=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var r={},e=0;e<10;e++)r["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(r).map((function(t){return r[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,r){for(var e,i,n=en(t),o=1;o<arguments.length;o++){for(var s in e=Object(arguments[o]))tn.call(e,s)&&(n[s]=e[s]);if($i){i=$i(e);for(var a=0;a<i.length;a++)rn.call(e,i[a])&&(n[i[a]]=e[i[a]])}}return n},on=function(t,r){return t=Ri(t,r),t=Ii(t,r)},sn=Ii;on.radialDistance=Ri,on.douglasPeucker=sn;var an=function(t,r){if("string"!=typeof t)throw new TypeError("must provide a string as first parameter");var e;r=nn({delaunay:!0,clean:!0,exterior:!1,randomization:0,simplify:0,scale:1},r);var i=Pi(t),n=Li(i,r.scale);if(r.simplify>0&&"number"==typeof r.simplify)for(e=0;e<n.length;e++)n[e]=on(n[e],r.simplify);var o=function(t){for(var r=[],e=[],i=0;i<t.length;i++){for(var n=t[i],o=[],s=0;s<n.length;s++){var a=n[s],h=r.indexOf(a);-1===h&&(r.push(a),h=r.length-1),o.push(h)}e.push(o)}return{positions:r,edges:e}}(n),s=o.positions,a=bi(s),h=r.randomization;"number"==typeof h&&h>0&&function(t,r,e){for(var i=r[0],n=r[1],o=0;o<e;o++)t.push([Ji(i[0],n[0]),Ji(i[1],n[1])])}(s,a,h);var u=o.edges,f=[];for(e=0;e<u.length;++e)for(var l=u[e],c=0;c<l.length;++c)f.push([l[c],l[(c+1)%l.length]]);!1!==r.clean&&qi(s,f);var p=ji(s,f,r);!1!==r.normalize&&Ki(s,a);return function(t){for(var r=0;r<t.length;r++){var e=t[r];e[1]*=-1,e[2]=e[2]||0}}(s),{positions:s,cells:p}};class hn extends V{constructor(t,r){let e=[];!function t(r,e,i={}){for(let n in r.childNodes){let o=r.childNodes[n];if(o.tagName){if("none"==o.getAttribute("display"))continue;switch(o.tagName){case"path":e.push(o.getAttribute("d"))}t(o,e,i)}}}(t,e);var i=an(e.join(),{delaunay:!1,scale:4});console.log(i),super(i)}}exports.SvgElement=class extends class extends class{constructor(){this.changed=!1,this.matrix=new e,this.matrixWorld=new e,this.position=new Proxy(new r,{set:(t,r,e,i)=>{let n=Reflect.set(t,r,e,i);return this.updateMatrixWorld(!0),n}}),this.quaternion=new Proxy(new i,{set:(t,r,e,i)=>{let n=Reflect.set(t,r,e,i);return this.updateMatrixWorld(!0),n}}),this.scale=new Proxy(new r(1,1,1),{set:(t,r,e,i)=>{let n=Reflect.set(t,r,e,i);return this.updateMatrixWorld(!0),n}}),this.parent=null,this.children=[],this.matrixAutoUpdate=!0}applyMatrix(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)}updateMatrix(){this.changed=!0,this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var r=this.children,e=0,i=r.length;e<i;e++)r[e].updateMatrixWorld(t)}rotateOnAxis(t,r){var e=new i;return e.setFromAxisAngle(t,r),this.quaternion.multiply(e),this}rotateOnWorldAxis(t,r){var e=new i;return e.setFromAxisAngle(t,r),this.quaternion.premultiply(e),this}rotateX(t){var e=new r(1,0,0);return this.rotateOnAxis(e,t)}rotateY(t){var e=new r(0,1,0);return this.rotateOnAxis(e,t)}rotateZ(t){var e=new r(0,0,1);return this.rotateOnAxis(e,t)}add(t){return t&&(t.parent=this,this.children.push(t)),this}traverse(t){t(this);for(var r=this.children,e=0,i=r.length;e<i;e++)r[e].traverse(t)}}{constructor(t,r){super(),this.isRenderableElement=!0,this.isBackground=!1,this.type="",this.vertexShader="\n        attribute vec4 position;\n        void main () {\n          gl_Position = position;\n        }\n      ",t.fragmentShader&&(this.fragmentShader=t.fragmentShader),t.vertexShader&&(this.vertexShader=t.vertexShader),t.uniforms&&(this.uniforms=t.uniforms),this.transparent=t.transparent||!1,this.side=t.side||s.FRONT,r instanceof V?(this.geometry=r,this.bufferGeometry=this.geometry.toBufferGeometry()):this.bufferGeometry=r,this.programManager=new F}getVertexNum(){return this.vertexNum}getProgram(){return this.glProgram}update(t,r){let e=r||{vertexShader:this.vertexShader,fragmentShader:this.fragmentShader};this.program=this.programManager.getProgram(t,e),this.glProgram=this.program.program,t.useProgram(this.glProgram),this.updateBuffer(t),this.updateUniforms(t)}updateBuffer(r){if(this.bufferManager)this.bufferManager.bindBuffer(r,this.glProgram,this.bufferGeometry);else{this.bufferManager=new t;let e=this.bufferManager.initBuffer(r,this.glProgram,this.bufferGeometry);this.vertexNum=e.count,this.hasIndex=e.hasIndex}}updateUniforms(t){this.program.uniformManager.updateUniforms(this.uniforms)}}{constructor(t,r,e){super(t=Object.assign({vertexShader:"\n        attribute vec4 position;\n        attribute vec2 uv                                                                                                                                                                                                                                                                                                                       ;\n        varying vec2 vUv;\n        uniform mat3 uvTransform;\n        uniform mat4 mvpMatrix;\n        void main () {\n          gl_Position = mvpMatrix*position;\n          vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n        }\n      "},t),new hn(r,e))}};
//# sourceMappingURL=index.cjs.js.map
